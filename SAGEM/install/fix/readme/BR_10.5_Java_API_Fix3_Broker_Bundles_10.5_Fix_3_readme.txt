                           webMethods Broker Java API 10.5 Fix 3 readme

                                            March 2021

____________________________________________________________________________________________________

1.0   Fix Name
2.0   Fix ID
3.0   Product(s)/Component(s) Affected
4.0   Requirements and Dependencies
5.0   Platform Support
6.0   Cautions and Warnings
7.0   Fix Contents
8.0   Installation
9.0   Uninstallation
10.0  Globalization
11.0  Copyright
____________________________________________________________________________________________________


1.0 Fix Name

webMethods Broker Java API 10.5 Fix 3



2.0 Fix ID

BR_10.5_Java_API_Fix3



3.0 Product(s)/Component(s) Affected

This fix affects webMethods Broker 10.5.



4.0 Requirements and Dependencies

BR_10.5_Core_Fix2

Fixes are cumulative. Therefore, for each of the listed fixes, you can install the specified fix or
later.

For language pack requirements, see the Globalization section of the Software AG Empower Product
Support website at https://empower.softwareag.com/Products/Globalization/default.asp



5.0 Platform Support

Same platforms as product release.



6.0 Cautions and Warnings

None.



7.0 Fix Contents

In addition to including resolutions to product defects, a fix may also include enhancements to
existing functionality and features. Any of these items can result in new or changed built-in
services, APIs, or configuration parameters. Review the fix contents carefully before installing the
fix.

This fix is cumulative, which means that it includes all previous fixes for the release.

PIF-15061
In webMethods Broker, unable to lookup JNDI objects after the installation of
Broker Java API 10.5 Fix 2. The following error message is displayed:
java.io.InvalidClassException: COM.activesw.api.client.BrokerEvent; local class
incompatible: stream classdesc serialVersionUID = 4049498353039593814, local
class serialVersionUID = -4787849573685321536

This issue is resolved.
You must re-create the JNDI entries for 'Cluster Connection Factory' if you have
previously created them using Broker Java API 10.5 Fix 2.

PIF-15006 (BR_10.5_Java_API_Fix2)
webMethods Broker can now report broker transaction metrics to the webMethods Metering Application.
These metrics are used to report customer's usage of webMethods Broker and allow transaction based
pricing to be applied based on the reported usage.

Key changes:
- Transaction metrics reporting begins when a Transaction-enabled license is applied to Broker.
- Metrics reported:
  BytesIn - number of bytes published during the metering period
  BytesOut - number of bytes consumed during the metering period
  MessagesIn - number of messages published during the metering period
  MessagesOut - number of messages consumed during the metering period
  ConnectionCount - number of connections established during the metering period
  TransactionCount - number of transactions initiated during the metering period
- Broker's metering reporting period is controlled through a new configuration -
  'metering-reporting-interval-sec' in the awbroker.cfg file, with a minimum value of 60 seconds and
  a maximum value of 3600 seconds. Broker will report metrics at this interval as deltas from the
  previous reports. If the above configuration is not present, then Broker checks for
  METERING_REPORTING_INTERVAL_SEC environment variable. Otherwise a default value of 600 seconds is
  used.
- Metrics collected from connections established by the Integration Server as a client will not be
  reported since they are metered at the Integration Server as a part of high level transaction.
- [BR_10.5_Core_Fix2 only] Broker's internal storage for broker and client statistics are changed in
  this fix. Hence, the storage from this fix cannot be used with older versions/fixes.
- [BR_10.5_Java_API_Fix2 only] Following changes are made to Broker Java APIs:
    a) BrokerAdminClient.getClientStatsById()
       BrokerAdminClient.getClientStatsByIds()
       - These APIs now return fields 'numEventsPublished', 'numEventsDelivered', 
        'lastConnectSession' and 'lastDisconnectSession' in both 'long' & 'int' data-types.
    b) BrokerAdminClient.getBrokerStats() API now return fields 'numTracesPublished',
       'numEventsPublished', 'numEventsDelivered' and 'numEventsQueued' in both 'long' & 'int' data-types.
    c) BrokerServerClient.getStats() API now returns new fields for current metering statistics:
        'isMeteringEnabled'
        'meteringLastReportTime'
        'meteringDeltaBytesIn'
        'meteringDeltaBytesOut'
        'meteringDeltaMessagesIn'
        'meteringDeltaMessagesOut'
        'meteringDeltaTransactions'
        'meteringDeltaConnections'
    d) BrokerAdminClient.getAllQueueStats() API is now deprecated.

PIF-15046 (BR_10.5_Java_API_Fix2)
broker_status.exe command-line tool shows broker statistics as negative numbers.

This issue is now resolved.

PIF-14846 (BR_10.5_Java_API_Fix1)
Integration Server shows high CPU usage and takes a long time to refresh the JMS trigger.

This issue occurs if there are a large number of triggers for a connection alias.
In case of a refresh, all trigger recreate consumers. Each recreate operation in turn performs a
lookup on XML DocumentBuilderFactory. That lookup can cause CPU intensive search through the
classpath.

This issue is now resolved.

PIF-14921 (BR_10.5_Java_API_Fix1)
webMethods Broker throws an exception and fails to load its entire JNDI (Java Naming and Directory
Interface) entries if it is unable to de-serialize any JNDI entry class object.

This issue is resolved.  Now, the Broker does not fail completely but continues to load JNDI entries
and retain the raw bytes of those JNDI entry class objects as it is.

PIF-14961 (BR_10.5_Java_API_Fix1)
In Deployer, an error is displayed when you perform a test connection to the webMethods 10.5 Broker
Server.

This issue occurs due to Broker Deployer incorrectly parsing the version string from the Broker
Server.

This issue is resolved.

PIF-14426 (BR_10.5_Java_API_Fix1)
Broker client displays an incorrect exception message when you enter an incorrect password during
the initialization of the SSL keystore file.

This issue is resolved. Broker client now displays the correct exception message.

PIF-14931 (BR_10.5_Java_API_Fix1)
Integration Server log shows the following error very frequently:
[BRM.10.4001] JMS: No response from Broker
 
This issue occurs when both client and server send a keep-alive request to each other, resulting in
a temporary deadlock in the client.
 
This issue is resolved.



8.0 Installation

Install using Software AG Update Manager. For instructions, see the documentation at
http://documentation.softwareag.com.

Install all of the following fixes, if available in Software AG Update Manager:
- Broker > Broker Java API 10.5 Fix 3
- Infrastructure > Libraries > Broker Libraries 10.5 Fix 3
- Infrastructure > Shared Platform > Bundles > Broker Bundles 10.5 Fix 3

When you apply the webMethods Broker Java API Fix, The Broker/lib and common/lib folders are updated
based on the components you have installed.

- If you have installed only webMethods Broker, applying the latest webMethods Broker Java API Fix
  will update both Broker/lib and common/lib folders.

- If you have installed webMethods Broker along with webMethods Integration Server and
  My webMethods, applying the latest webMethods Broker Java API Fix will update both Broker/lib and
  common/lib folders.

- If you have installed only webMethods Integration Server and My webMethods, the webMethods
  application that uses the Broker Java API jar is installed. In this case only the common/lib
  files will be present. Applying the Broker Java API Common Libraries will update only the
  common/lib folder.

- If you are using application servers such as WebSphere Application Server, JBoss, and WebLogic,
  you would have pointed the application server to the required jars in either the Broker/lib or
  common/lib folder. In this case applying the latest webMethods Broker Java API Fix will update
  both Broker/lib and common/lib folders.

- If you are using Broker client's libraries for custom Java applications, you must now include
  common/lib/saglic.jar in the application's CLASSPATH.



9.0 Uninstallation

Note: These instructions can only be used to uninstall the most recently installed fix. This action
will revert your installation to the previously installed fix. You cannot use these instructions to
uninstall the previously installed fix.

Uninstall using Software AG Update Manager. For instructions, see the documentation at
http://documentation.softwareag.com.



10.0 Globalization

This fix conforms to the internationalization standards of the webMethods product suite and includes
support for operation in any country, locale, or language as specified in the Installing webMethods
Products guide. It was not tested with non-English configurations and non-ASCII data. However, this
fix has no globalization impact and can be applied to systems running in any supported locale or
configuration.


10.1 Localization

This fix does not require an updated language pack. It might contain new messages and these messages 
will appear in English.



11.0 Copyright

Copyright © 2021 Software AG, Darmstadt, Germany and/or Software AG USA Inc., Reston, VA, USA,
and/or its subsidiaries and/or its affiliates and/or their licensors.

The name Software AG and all Software AG product names are either trademarks or registered
trademarks of Software AG and/or Software AG USA Inc. and/or its subsidiaries and/or its affiliates
and/or their licensors. Other company and product names mentioned herein may be trademarks of their
respective owners.

Detailed information on trademarks and patents owned by Software AG and/or its subsidiaries is
located at http://softwareag.com/licenses .

This software may include portions of third-party products. For third-party copyright notices,
license terms, additional rights or restrictions, please refer to "License Texts, Copyright Notices
and Disclaimers of Third Party Products". For certain specific third-party license restrictions,
please refer to section E of the Legal Notices available under "License Terms and Conditions for Use
of Software AG Products / Copyright and Trademark Notices of Software AG Products". These documents
are part of the product documentation, located at http://softwareag.com/licenses and/or in the root
installation directory of the licensed product(s).
