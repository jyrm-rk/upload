var DriverDomObjectsContainerID="_Nirvana_Driver_DOM_Objects_Container";var nirvanaObjTemp={};(function(){var y={};var i={};var j=0;function A(){if(j===0){j++;return null;}else{return DriverDomObjectsContainerID;}}try{if(window.addEventListener){window.addEventListener("keydown",x,false);}else{if(document.attachEvent){document.attachEvent("onkeydown",x);}else{document.addEventListener("keydown",x,true);}}}catch(C){}function x(K){if(!K){K=window.event;}if(K.keyCode==68&&K.ctrlKey&&K.altKey){F();}}function F(){if(!i.log.debugConsoleOpened||(i.log._console&&i.log._console.closed)){i.log._console=window.open("","Console","width=600,height=300,scrollbars=yes,resizable");i.log._console.document.open();i.log._console.document.writeln("<style> { font-size: 10px; font-family: verdana, lucida sans, courier new, courier, sans-serif ; }</style>");i.log._console.document.writeln("<b>User Agent: "+navigator.userAgent+"</b><br/>");for(var K=0;K<i.log.logs.length;K++){i.log._console.document.writeln(i.log.logs[K]+"<br/>");}i.log.debugConsoleOpened=true;}else{i.log._console.focus();}}function r(){return navigator.appName.replace(" ","-");}function H(){return window.navigator.platform.toString().replace(" ","_");}function l(M){if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(2,"[initXMLHTTP] for "+M);}var N=false;if(typeof window.XMLHttpRequest!="undefined"&&window.XMLHttpRequest){try{N=new XMLHttpRequest();if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(2,"initXMLHTTP : Constructed XMLHttpRequest for ["+M+"]");}return N;}catch(P){if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(2,"initXMLHTTP : Error constructing XMLHttpRequest for ["+M+"]. error="+P.message);}N=false;}}else{if(typeof window.ActiveXObject!="undefined"&&window.ActiveXObject){var L=["MSXML2.XMLHttp","Microsoft.XMLHttp","MSXML2.XMLHttp.5.0","MSXML2.XMLHttp.4.0","MSXML2.XMLHttp.3.0"];for(var K=0;K<L.length;K++){try{N=new ActiveXObject(L[K]);if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(2,"initXMLHTTP : Constructed ActiveXObject XMLHttpRequest using ["+L[K]+"] for ["+M+"]");}return N;}catch(O){if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(2,"initXMLHTTP : Error constructing ActiveXObject XMLHttpRequest :"+L[K]+" for ["+M+"]. error="+O.message);}N=false;}}}else{if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(2,"initXMLHTTP : Failed to construct xmlHTTP object for ["+M+"]");}N=false;}}return N;}function f(R,O,T,K){if(T&&i.preferredDrivers.length){return;}if(typeof R=="undefined"){i.preferredDrivers=a;}else{var L=[];for(var M=0;M<R.length;M++){var P=R[M];if(typeof window.Nirvana.Driver[P]!="undefined"){L.push(P);}else{if(typeof window==="undefined"){console.log("Node js Implementation");L.push("WEBSOCKET");}else{i.ListenerManagers[window.Nirvana].notifyListeners(window.Nirvana.Observe.ERROR,K,new i.exceptions.InvalidDriverException(P));}}}if(L.length){i.preferredDrivers=L;}else{i.preferredDrivers=a;}}if(O){i.preferredDrivers=B(i.preferredDrivers);}var N=0;if(i.Transport.getConfig().rememberDriver){var S=i.Utils.getCookie("NirvanaDriver");if(S!==null){for(var Q=0;Q<i.preferredDrivers.length;Q++){if(i.preferredDrivers[Q]==S){N=Q;}}}}nirvana_notifyListeners.notifyListeners(window.Nirvana.Observe.DRIVER_CHANGE,K,i.preferredDrivers[N]);}function B(L){function K(O){var N=L.indexOf(O);if(N>-1){L.splice(N,1);}}function M(){var N=navigator.userAgent.toLowerCase();return N.indexOf("msie")!=-1?parseInt(N.split("msie")[1],10):false;}if(M()==9){K(nirvanaObj.Drivers.Names.JSONP_LONGPOLL);}return L;}function d(){var K=null;var L=function(){try{if(document.getElementById(y.driverDomObjectsContainerID())===null){var N=document.createElement("span");N.style.display="none";N.setAttribute("id",DriverDomObjectsContainerID);var M=document.getElementsByTagName("body")[0];M.appendChild(N);clearInterval(K);}}catch(O){}};L();if(document.getElementById(y.driverDomObjectsContainerID())===null){K=setInterval(function(){L();},10);}}function c(O,M,K,L,N){this.session=O;this.proxyWin=null;this.initialized=false;this.initCallback=L;this.proxyRealm=K;this.proxyID=M+"_"+new Date().getTime();this.proxyURL=K+O.getConfig().crossDomainPath+"/crossDomainProxy.html";this.proxyIFrame=h(this.proxyURL+"?proxyID="+this.proxyID+"&sessionID="+i.Utils.generateUniqueID()+"&validOrigins="+encodeURIComponent(O.getConfig().currentDomain+","+O.getConfig().realms.join(",")),N);this.readyState=0;this.responseText="";this.status=0;i.postMessageProxies.collection[this.proxyID]=this;}c.prototype.proxyRequest=function(N,K){if(this.proxyWin===null){this.proxyWin=this.proxyIFrame.contentWindow;}var M=[this.proxyID,N];for(var L=0;L<K.length;L++){M.push(K[L]);}this.proxyWin.postMessage(JSON.stringify(M),this.proxyRealm);};c.prototype.open=function(M,K,L){this.proxyRequest("open",arguments);};c.prototype.send=function(){this.proxyRequest("send",arguments);};c.prototype.setRequestHeader=function(){this.proxyRequest("setRequestHeader",arguments);};c.prototype.abort=function(){this.proxyRequest("abort",arguments);};c.prototype.destroy=function(){this.proxyIFrame.src=this.proxyURL+"?expired="+new Date().getTime();delete i.postMessageProxies.collection[this.proxyID];i.postMessageProxies.collection[this.proxyID]=null;this.proxyIFrame=null;this.responseText=null;};function b(O,M,Q){var L;if(document.createElement){var P=document.getElementById("NVLSubFrame");if(P){P.setAttribute("src",O);L=P;}else{if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(2,"Iframe does not exist, so creating new one");}var K='<iframe id="NVLSubFrame"';K+=" onload=\"window.parent.errorCB('iframe_connection_closed',";K+=window.ActiveXObject?true:false;K+=')"';K+=' src="'+O+'" style="';K+="border:1px;";K+="width:0px;";K+="height:0px;";K+='"></iframe>';if(window.ActiveXObject){this.htmlfile=new ActiveXObject("htmlfile");this.htmlfile.open();this.htmlfile.write("<html></html>");this.htmlfile.close();this.htmlfile.parentWindow.onMessage=M;this.htmlfile.parentWindow.errorCB=Q;var N=this.htmlfile.createElement("div");this.htmlfile.body.appendChild(N);N.innerHTML+=K;L=this.htmlfile;}else{document.getElementById(DriverDomObjectsContainerID).innerHTML+=K;L={};L.document={};L.document.location={};L.document.location.iframe=document.getElementById("NVLSubFrame");L.document.location.replace=function(R){this.iframe.src=R;};}}}return L;}function D(M){this.id=i.Utils.generateUniqueID();if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(2,"[JSONP_Poller] Creating new longpoller: "+this.id);}var K="container"+this.id;var Q=0;var P=document.createElement("div");P.style.display="none";P.setAttribute("id",K);var L=document.createElement("link");L.setAttribute("rel","shortcut icon");L.setAttribute("href","about:blank");P.appendChild(L);document.getElementById(DriverDomObjectsContainerID).appendChild(P);var O=false;var N=navigator.appName=="Microsoft Internet Explorer";this.send=function(S,V){var U=S+"?"+V[0]+"&"+V[1];if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(2,"[JSONP_Poller] Sending "+U);}try{if(O){n(P,N);}else{O=true;}var R=document.createElement("script");R.type="text/javascript";R.src=U;R.onerror=M;P.appendChild(R);Q=0;}catch(T){if(Q++==5){M("[JSONP_Poller] Exception: "+T.message);}}};this.destroy=function(){n(P,N);document.getElementById(DriverDomObjectsContainerID).removeChild(P);};}window.addEventListener("message",function(O){if(!E(O.data)){if(i.Utils.isLoggingEnabled()){y.log(0,"Window received message event that is not intended as cross domain proxy communication.");}return;}if(!p(i.Utils.getCanonicalOrigin(O.origin))){i.ListenerManagers[window.Nirvana].notifyListeners(window.Nirvana.Observe.ERROR,null,new i.exceptions.DriverSecurityException("CrossDomainProxy","PostMessage Event Origin "+O.origin+" does not equal any proxied realm origin "+J()));return;}var K=JSON.parse(O.data);var L=K[0];var N=K[2];var M=i.postMessageProxies.collection[L];if(N=="init"&&M){M.initialized=true;M.initCallback("initialized");}if(N=="change"){if(M.onreadystatechange){M.responseText=K[3];M.readyState=K[4];M.status=K[5];M.onreadystatechange();}}if(N=="iframe"){i.Transport.c(JSON.parse(K[3]));}if(N=="iFrame_close"){i.Transport.onError(N);}if(N=="sse"){i.Transport.c(JSON.parse(K[3]));}},false);function o(L,K){return i.ListenerManagers[window.Nirvana].notifyListeners(window.Nirvana.Observe.ERROR,L,K);}function s(K,L){return i.ListenerManagers[window.Nirvana].notifyListeners(window.Nirvana.Observe.ERROR,K,L);}function z(){return window.document.getElementById(y.driverDomObjectsContainerID());}function m(K,L){i=nirvana_core;return i.ListenerManagers[window.Nirvana].notifyListeners(window.Nirvana.Observe.ERROR,K,L);}function u(K){if(window.addEventListener){window.addEventListener("beforeunload",K,false);}else{if(window.attachEvent){window.attachEvent("onbeforeunload",K);}}}function t(K,L){return i.ListenerManagers[window.Nirvana].notifyListeners(window.Nirvana.Observe.ERROR,K,L);}function q(L){var K=document.location.protocol+"//"+document.location.hostname;if(document.location.host.match(/:[0-9]+$/)){K+=":"+document.location.port;}else{K=i.Utils.getCanonicalOrigin(K);}L.realms=[K];return[K];}function G(){var K=document.location.protocol+"//"+document.location.hostname;if(document.location.protocol!="file:"){if(document.location.host.match(/:[0-9]+$/)){K+=":"+document.location.port;}else{K=i.Utils.getCanonicalOrigin(K);}}return K;}function E(M){var L=JSON.parse(M);if(L.length>0){var K=L[0];if(K.indexOf("EVENTSOURCE_STREAMING_POSTMESSAGE")!=-1||K.indexOf("XHR_LONGPOLL_POSTMESSAGE")!=-1||K.indexOf("IFRAME_STREAMING_POSTMESSAGE")!=-1){return true;}}return false;}function p(K){K=K.toUpperCase();for(var L in i.postMessageProxies.collection){if(i.postMessageProxies.collection.hasOwnProperty(L)){if(i.postMessageProxies.collection[L]){if(i.Utils.getCanonicalOrigin(i.postMessageProxies.collection[L].proxyRealm).toUpperCase()==K){return true;}}}}return false;}function n(M,L){if(L){while(M.hasChildNodes()){M.removeChild(M.lastChild);}}else{while(M.hasChildNodes()){var K=M.removeChild(M.lastChild);for(var N in K){delete K[N];}}}}function J(){var L=[];for(var K in i.postMessageProxies.collection){if(i.postMessageProxies.collection.hasOwnProperty(K)){if(i.postMessageProxies.collection[K]){L.push(getCanonicalOrigin(i.postMessageProxies.collection[K].proxyRealm));}}}return L.join(",");}function h(K,M){var N=document.createElement("iframe");N.id="iframe"+new Date().getTime();N.src=K;N.style.display="none";N.style.position="absolute";N.onerror=M;try{document.getElementById(DriverDomObjectsContainerID).appendChild(N);}catch(L){M("IFrame Exception: "+L.message);}return N;}function g(K,L){if(i.log.debugLevel<=K){var N=Array.prototype.slice.call(arguments);N.unshift(new Date());var M=N.join(" ");if(i.log.debugConsoleOpened&&i.log._console&&!i.log._console.closed){i.log._console.document.writeln(M+"<br/>");}if(i.log.logs.length>i.log.maxLogLength){i.log.logs.shift();}i.log.logs.push(M);i.log.logFunction(M);}}var k=function(L,K){document.cookie=L+"="+encodeURIComponent(K)+"; expires="+new Date(new Date().getTime()+365*24*60*60*1000)+"; ";};var e=function(N){var L=document.cookie.split("; ");for(var K=0;K<L.length;K++){var M=L[K].split("=");if(M[0]==N){return decodeURIComponent(M[1]);}}return null;};function I(K){i=K;}function v(){this.id=i.Utils.generateUniqueID();var K="container"+this.id;var M=document.createElement("div");M.style.display="none";M.setAttribute("id",K);document.getElementById(DriverDomObjectsContainerID).appendChild(M);var L=navigator.appName=="Microsoft Internet Explorer";if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(2,"[FormSubmitter] Creating new FormSubmitter: "+this.id);}this.send=function(N,S){if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(2,"[FormSubmitter] Sending "+N+"?"+S[0]+"&"+S[1]);}n(M,L);var P=document.createElement("form");P.style.display="none";P.style.position="absolute";P.method="POST";P.enctype="application/x-www-form-urlencoded";P.acceptCharset="UTF-8";M.appendChild(P);var Q;try{Q=document.createElement('<iframe name="'+this.id+'">');}catch(X){Q=document.createElement("iframe");Q.name=this.id;}Q.id=this.id;Q.style.display="none";P.appendChild(Q);P.target=this.id;P.action=N+"?"+S[0];try{var U=S[1].split("&");for(var T=0;T<U.length;T++){var W=U[T].indexOf("=");if(W>-1){var Y=U[T].substring(0,W);var R=U[T].substring(W+1,U[T].length);var O=document.createElement("textarea");O.name=Y;O.value=R;P.appendChild(O);}}}catch(V){if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(2,"[FormSubmitter] Exception: "+V.message);}}P.submit();};this.destroy=function(){n(M,L);document.getElementById(DriverDomObjectsContainerID).removeChild(M);};}var w=(function(){var M={WEBSOCKET:"WEBSOCKET",XHR_STREAMING_CORS:"XHR_STREAMING_CORS",IFRAME_STREAMING_POSTMESSAGE:"IFRAME_STREAMING_POSTMESSAGE",EVENTSOURCE_STREAMING_POSTMESSAGE:"EVENTSOURCE_STREAMING_POSTMESSAGE",XHR_LONGPOLL_CORS:"XHR_LONGPOLL_CORS",XHR_LONGPOLL_POSTMESSAGE:"XHR_LONGPOLL_POSTMESSAGE",JSONP_LONGPOLL:"JSONP_LONGPOLL",NOXD_IFRAME_STREAMING:"NOXD_IFRAME_STREAMING"};var K={WEBSOCKET:"nws",XHR_STREAMING_CORS:"ncc",IFRAME_STREAMING_POSTMESSAGE:"nsc",EVENTSOURCE_STREAMING_POSTMESSAGE:"nsse",XHR_LONGPOLL_CORS:"nlpc",XHR_LONGPOLL_POSTMESSAGE:"nlp",JSONP_LONGPOLL:"nlpj",NOXD_IFRAME_STREAMING:"nsc"};function N(P){return new L[P](P);}var L={};L[M.WEBSOCKET]=function(Q){var R=true;var P;this.name=Q;if(typeof window==="undefined"){this.isClientSupported=function(){return true;};}else{this.isClientSupported=function(){return"WebSocket" in window||"MozWebSocket" in window;};}this.usesKeepAlive=function(){return true;};this.open=function(){R=false;if(!this.isClientSupported()){i.Transport.onError(this.name+" driver not supported by client");return;}var U;var T=window.document.createElement("a");T.href=i.Transport.getCurrentRealm();if(T.protocol==="http:"){U="ws://"+T.host;}else{U="wss://"+T.host;}U+="/sv/ws";if("WebSocket" in window){P=new window.WebSocket(U);}else{if("MozWebSocket" in window){P=new MozWebSocket(U);}else{return false;}}var S=function(W){if(R){i.Transport.onClose();}else{var V=W;if(W.code){V+=" Error Code : "+W.code;}if(W.reason){V+=" Reason : "+W.reason;}i.Transport.onError(V);}};P.onopen=i.Transport.onOpen;P.onclose=S;P.onerror=S;P.onmessage=function(V){if(V.data){i.Transport.d(V.data);}};};this.send=function(T,S){P.send(S[0]+"&"+S[1]);if(i.Transport.isConnected()){i.OutboundEngine.setReady(true);}};this.close=function(){R=true;P.close();};};L[M.XHR_STREAMING_CORS]=function(Q){this.name=Q;var U,S,T=null;var R=2000;var V=false;var P=i.Transport.getCurrentSession().getConfig().maxStreamLengthStreamingCors;this.isClientSupported=function(){return !!window.XMLHttpRequest&&typeof new XMLHttpRequest().withCredentials!="undefined";};this.usesKeepAlive=function(){return true;};this.open=function(){var W=false;if(!this.isClientSupported()){i.Transport.onError(this.name+" driver not supported by client");return;}T=i.Transport.getCurrentRealm()+"/sv/nvLite";U=new XMLHttpRequest();U.onreadystatechange=function(){if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(1,"["+Q+" Receiver] "+this.readyState+" : CumulativeResponseLength="+this.responseText.length);}if(this.readyState==3){R=O.processResponseChunk(this.responseText,R);if(this.responseText.length>=P&&!W){W=true;if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(4,"["+Q+" Receiver] Reached max stream length "+P+", resetting.");}i.OutboundEngine.prioritizeCommand({requestType:i.PrivateConstants.CLIENT_CLOSE,clientRequest:false});}}else{if(this.readyState==4&&!W){i.Transport.onError("Receiver Connection Closed = "+this.status);}}};S=new XMLHttpRequest();S.onreadystatechange=function(){if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(1,"["+Q+" Sender] "+this.readyState+" : CumulativeResponseLength="+this.responseText.length);}if(this.readyState==4&&this.status!=200){i.Transport.onError("Sender Connection Status = "+this.status);}else{if(this.readyState>3){i.Transport.c(this.responseText);i.OutboundEngine.setReady(true);}}};i.Transport.onOpen();};this.send=function(X,W){if(!V){if(X.requestType===i.PrivateConstants.SESSION_START){U.open("GET",T+"?"+W[0]);U.withCredentials=true;U.send();}else{S.open("POST",T+"?"+W[0]);S.withCredentials=true;S.setRequestHeader("Content-Type","text/plain");S.send(W[1]);}}};this.close=function(){if(!V){V=true;U.abort();U=null;S.abort();S=null;i.Transport.onClose();}};};L[M.IFRAME_STREAMING_POSTMESSAGE]=function(P){this.name=P;var U,Q,R=null;var S=false;this.isClientSupported=function(){var X=navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Konqueror")!==-1;return((typeof window.postMessage==="function"||typeof window.postMessage==="object")&&!X);};this.usesKeepAlive=function(){return true;};this.open=function(){if(!this.isClientSupported()){i.Transport.onError(this.name+" driver not supported by client");return;}R=i.Transport.getCurrentRealm()+"/sv/nvLite";i.OutboundEngine.setReady(false);U=Q=new c(i.Transport.getCurrentSession(),this.name,i.Transport.getCurrentRealm(),W,i.Transport.onError);Q.onreadystatechange=function(){if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(1,"["+P+" Sender] "+this.readyState+" : "+this.responseText);}if(this.readyState==4){if(this.status!=200){i.Transport.onError(P+" sender status "+this.status);}else{if(S){i.OutboundEngine.setReady(true);}}}};};function W(){S=true;i.Transport.onOpen();}function V(X){if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(1,"["+P+" Receiver] "+i.Transport.getCurrentRealm()+"/sv/nvLite?"+X);}U.proxyRequest("createForeverIFrame",[i.Transport.getCurrentRealm()+"/sv/nvLite?"+X]);}function T(Y,X){if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(1,"["+P+" Sender] "+i.Transport.getCurrentRealm()+"/sv/nvLite?"+X);}Q.open("POST",R+"?"+X[0]);Q.send(X[1]);}this.send=function(Y,X){if(Y.requestType===i.PrivateConstants.SESSION_START){V(X[0]+"&"+X[1]);}else{T(Y,X);}};this.close=function(){S=false;Q.abort();U.destroy();Q=null;U=null;i.Transport.onClose();};};L[M.EVENTSOURCE_STREAMING_POSTMESSAGE]=function(Q){this.name=Q;var P=this;var T,R=null;this.isClientSupported=function(){if(!("EventSource" in window)){return false;}var V=navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Konqueror")!==-1;return((typeof window.postMessage==="function"||typeof window.postMessage==="object")&&!V);};this.usesKeepAlive=function(){return true;};this.open=function(){if(!this.isClientSupported()){i.Transport.onError(this.name+" driver not supported by client");return;}T=R=new c(i.Transport.getCurrentSession(),this.name,i.Transport.getCurrentRealm(),i.Transport.onOpen,i.Transport.onError);R.onreadystatechange=function(){if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(1,"["+Q+" Sender] "+this.readyState+" : "+this.responseText);}if(this.readyState==4){if(this.status!=200){i.Transport.onError(Q+" sender status "+this.status);}else{i.OutboundEngine.setReady(true);}}};};function U(V){if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(1,"["+Q+" Receiver] "+i.Transport.getCurrentRealm()+"/sv/nvLite?"+V);}T.proxyRequest("createEventSource",i.Transport.getCurrentRealm()+"/sv/nvLite?"+V);P.send=S;}function S(W,V){if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(1,"["+Q+" Sender] "+i.Transport.getCurrentRealm()+"/sv/nvLite?"+V);}R.open("POST",i.Transport.getCurrentRealm()+"/sv/nvLite?"+V[0],true);R.send(V[1]);}this.send=function(W,V){U(V[0]+"&"+V[1]);};this.close=function(){R.abort();R=null;T=null;i.Transport.onClose();};};L[M.XHR_LONGPOLL_CORS]=function(Q){this.name=Q;var S,R,P=null;var T=false;this.isClientSupported=function(){return !!window.XMLHttpRequest&&typeof new XMLHttpRequest().withCredentials!="undefined";};this.usesKeepAlive=function(){return false;};this.open=function(){if(!this.isClientSupported()){i.Transport.onError(this.name+" driver not supported by client");return;}P=i.Transport.getCurrentRealm()+"/sv/nvLite";S=new XMLHttpRequest();S.onreadystatechange=function(){if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(1,"["+Q+"] receiver ("+this.readyState+") : "+this.responseText);}if(this.readyState==4){if(this.status!=200){i.Transport.onError(Q+" receiver status "+this.status);}else{i.Transport.d(this.responseText);if(!T){setTimeout(O.longpoll,0);}}}};R=new XMLHttpRequest();R.onreadystatechange=function(){if(this.readyState==4){if(this.status!=200){i.Transport.onError(Q+" sender status "+this.status);}else{if(this.responseText){i.Transport.d(this.responseText);if(!T){O.longpoll();}}i.OutboundEngine.setReady(true);}}};i.Transport.onOpen();};this.send=function(V,U){if(!T){if(V.requestType===i.PrivateConstants.KEEP_ALIVE||V.requestType===i.PrivateConstants.SESSION_START){S.open("GET",P+"?"+U[0]+"&"+U[1]);S.withCredentials=true;S.send();}else{R.open("POST",P+"?"+U[0]);R.withCredentials=true;R.setRequestHeader("Content-Type","text/plain");R.send(U[1]);}}};this.close=function(){if(!T){T=true;O.cancelLongpollTimeout();try{S.onreadystatechange=null;R.onreadystatechange=null;S.abort();R.abort();}catch(U){if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(1,"["+Q+"] exception on close(): "+U.message);}}S=null;R=null;i.Transport.onClose();}};};L[M.XHR_LONGPOLL_POSTMESSAGE]=function(P){this.name=P;var S,Q,R=null;var T=false;this.isClientSupported=function(){var U=navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Konqueror")!==-1;return((typeof window.postMessage==="function"||typeof window.postMessage==="object")&&!U);};this.usesKeepAlive=function(){return false;};this.open=function(){if(!this.isClientSupported()){i.Transport.onError(this.name+" driver not supported by client");return;}R=i.Transport.getCurrentRealm()+"/sv/nvLite";S=new c(i.Transport.getCurrentSession(),P,i.Transport.getCurrentRealm(),U,i.Transport.onError);S.onreadystatechange=function(){if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(1,"["+P+"] receiver: ("+this.readyState+") : "+this.responseText);}if(this.readyState==4){if(this.status!=200){i.Transport.onError(P+" receiver status "+this.status);}else{i.Transport.d(this.responseText);if(!T){O.longpoll();}}}};Q=new c(i.Transport.getCurrentSession(),P,i.Transport.getCurrentRealm(),U,i.Transport.onError);Q.onreadystatechange=function(){if(this.readyState==4){if(this.status!=200){i.Transport.onError(P+" sender status "+this.status);}else{if(this.responseText){i.Transport.d(this.responseText);if(!T){O.longpoll();}}i.OutboundEngine.setReady(true);}}};function U(){if(!!S&&!!Q&&S.initialized&&Q.initialized){i.Transport.onOpen();}}};this.send=function(V,U){if(!T){if(V.requestType===i.PrivateConstants.KEEP_ALIVE){if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(1,"["+P+"] receiver requesting: "+U);}S.open("GET",R+"?"+U[0]);S.send();}else{if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(1,"["+P+"] sender requesting: "+U);}Q.open("POST",R+"?"+U[0]);Q.send(U[1]);}}};this.close=function(){if(!T){T=true;O.cancelLongpollTimeout();S.onreadystatechange=null;Q.onreadystatechange=null;S.abort();Q.abort();S=null;Q=null;i.Transport.onClose();}};};L[M.JSONP_LONGPOLL]=function(P){this.name=P;var T,R,S=null;var U=false;this.id=i.Utils.generateUniqueID();this.isClientSupported=function(){return true;};this.usesKeepAlive=function(){return false;};function Q(V){if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(1,"["+P+"] receiverResponseHandler: "+V);}if(i.Transport.c(V)){if(i.Transport.isConnected()){i.OutboundEngine.setReady(true);}}if(!U){O.longpoll();}}this.open=function(){if(!this.isClientSupported()){i.Transport.onError(this.name+" driver not supported by client");return;}S=i.Transport.getCurrentRealm()+"/sv/nvLite";window.LPReadyStateCB=Q;T=new i.Utils.JSONP_Poller(i.Transport.onError);R=new v();i.Transport.onOpen();};this.send=function(W,V){if(!U){if(W.requestType===i.PrivateConstants.KEEP_ALIVE||W.requestType===i.PrivateConstants.SESSION_START){if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(1,"["+P+"] Receiver Req: "+V[0]);}T.send(S,V);}else{if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(1,"["+P+"] Sender Req: "+V[0]+"&"+V[1]);}R.send(S,V);}}};this.close=function(){if(!U){U=true;O.cancelLongpollTimeout();T.destroy();T=null;R.destroy();R=null;window.LPReadyStateCB=function(){};i.Transport.onClose();}};};L[M.NOXD_IFRAME_STREAMING]=function(S){var P=i.Transport.getCurrentSession();this.name=S;var ac=this;var Q,W,U=null;var X=0;var T=false;this.isClientSupported=function(){if(!P){return true;}var af=P.getConfig().realms;var ah=af.length;var ag=location.host;var ai=new RegExp("https?://"+ag+"/?");for(var ae=0;ae<ah;ae++){var ad=i.Utils.getCanonicalOrigin(af[ae]);if(ai.test(ad)){return true;}}return false;};this.usesKeepAlive=function(){return true;};function ab(ad){if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(1,"["+S+"] receiverCB: "+typeof ad+" "+ad);}if(ad){i.Transport.c(ad);}}function V(ad){if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(1,"["+S+"] senderCB: "+typeof ad+" "+ad);}if(ad){i.Transport.d(ad);}i.OutboundEngine.setReady(true);}function Z(ae,ad){i.Transport.onError(ae);}function Y(ad){Q=b(U+"?"+ad,ab,Z);if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(1,"["+S+" Receiver] "+U+"?"+ad);}ac.send=R;}function R(ag,af){if(!T){if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(1,"["+S+" Sender] "+U+"?"+af);}var ad=ag.requestType===i.PrivateConstants.CLIENT_CLOSE;W.open("POST",U+"?"+af[0],ad);W.onreadystatechange=aa;W.setRequestHeader("Content-Type","application/x-www-form-urlencoded");try{if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(1,"["+S+"] XHR POST: "+af);}W.send(af[1]);return true;}catch(ae){return false;}}}function aa(){if(W===null){if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(1,"["+S+"] statechangecb: Sender is already null");}return;}var ae=W.readyState;if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(1,"["+S+"] statechangecb: State now changed to "+ae);}if(ae!==4){return;}var ag;try{ag=W.status;}catch(ad){if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(1,"["+S+"] statechangecb : failed to read status code");}}if(ag===200||ag===0){V(W.responseText);}else{if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(1,"["+S+"] statechangecb - status of "+ag+" forcing session reset");}X++;i.Transport.onError("Error transports has been closed");}var af=document.getElementById("NVLSubFrame");if(af){while(af.hasChildNodes()){af.removeChild(af.lastChild);}}}this.open=function(){if(!this.isClientSupported()){i.Transport.onError(this.name+" driver not supported by client");return;}U=i.Transport.getCurrentRealm()+"/sv/nvLite";W=l("xmlhttp");W.onreadystatechange=aa;window.onMessage=ab;window.errorCB=Z;i.Transport.onOpen();return true;};this.send=function(ae,ad){Y(ad[0]+"&"+ad[1]);};this.close=function(){if(!T){T=true;window.onMessage=function(){};window.errorCB=function(){};W.onreadystatechange=function(){};W.abort();if(Q.close){Q.close();}W=null;Q=null;i.Transport.onClose();}};};var O=(function(){var P=null;function R(){var V=i.Transport.getDriver();if(V===null){T();return;}T();var W={requestType:i.PrivateConstants.KEEP_ALIVE,requestID:i.Transport.getRequestCountIncrement()};var U=i.Transport.getCurrentSession().requestFactory.buildRequest(W);if(i.Utils.isLoggingEnabled()){i.Utils.Logger.log(1,"["+V.name+"] longpoll() Sending request number "+W.requestID+" of "+i.Transport.getRequestCount()+" for  "+U);}V.send(W,U);Q(V.name);}function Q(U){P=setTimeout(function(){i.Transport.onError(U+" Longpoll Timeout");},i.Transport.getConfig().sessionTimeoutMs);}function T(){if(P!==null){clearTimeout(P);}}function S(U,W){if(W>U.length){return W;}var V;do{V=U.indexOf("];[",W)+2;if(V===1){if(U.charAt(U.length-1)==";"&&U.charAt(U.length-2)=="]"){V=U.length;}else{return W;}}if(V>W){i.Transport.d(U.substring(W,V-1));W=V;}}while(V!=U.length);return W;}return{longpoll:R,cancelLongpollTimeout:T,processResponseChunk:S};})();return{Names:M,WireProtocol:K,createDriver:N};})();nirvanaObjTemp={implNirvanaCore:I,Drivers:w,getCookie:e,setCookie:k,log:g,getPostMessageProxyRealms:J,createIFrame:h,getCurrentDomainUrl:G,getFormatedUrlRealm:q,subscribeNotifyListener:t,subscribeListenerManager:m,addClientEventListener:u,getElementofDriverDomOnjContainer:z,notifyListenersManagerStart:s,openListenerManager:o,JSONP_Poller:D,debuggerKeyListener:x,navigatorAppname:r,navigatorPlatform:H,initXMLHTTP:l,setPreferredDrivers:f,driverDomObjectsContainerID:A,initialize:d,applyUserAgentHeuristics:B};var a=[w.Names.WEBSOCKET,w.Names.XHR_STREAMING_CORS,w.Names.IFRAME_STREAMING_POSTMESSAGE,w.Names.EVENTSOURCE_STREAMING_POSTMESSAGE,w.Names.XHR_LONGPOLL_CORS,w.Names.XHR_LONGPOLL_POSTMESSAGE,w.Names.NOXD_IFRAME_STREAMING,w.Names.JSONP_LONGPOLL];y=nirvanaObjTemp;})(window);function implnirvanaObj(){implnirvanaObjTemp(nirvanaObjTemp);nirvanaObjTemp={};}
/*!
 *
 *   Copyright (c) 1999 - 2011 my-Channels Ltd
 *   Copyright (c) 2012 - 2020 Software AG, Darmstadt, Germany and/or Software AG USA Inc., Reston, VA, USA, and/or its subsidiaries and/or its affiliates and/or their licensors.
 *
 *   Use, reproduction, transfer, publication or disclosure is prohibited except as specifically provided for in your License Agreement with Software AG.
 *
 */
var isBrowser=typeof window!=="undefined"&&typeof global!=="object"&&{}.toString.call(window)==="[object Window]";(function(){var a={};if(isBrowser){implnirvanaObj();var d=nirvanaObjJS;nirvanaObjJS={};window.nirvanaObjJS={};window.nirvana_notifyListeners=a;}var c=(function(){var r={};var E={};r=d;if(!isBrowser){r=require("../node/um-node").nirvanaObj;}var ab={SESSION_START:1,RESOURCE_SUBSCRIBE:2,KEEP_ALIVE:3,BATCH_SUBSCRIBE:5,PACKET_RECEIVE:7,EVENT_RECEIVE:8,SET_RESOURCE_ALIAS:10,RESOURCE_PUBLISH:14,RESOURCE_UNSUBSCRIBE:15,QUEUE_COMMIT:16,QUEUE_ROLLBACK:17,TX_PUBLISH:20,TX_IS_COMMITTED:24,CLIENT_CLOSE:30};var u={START:1,STOP:2,DISCONNECT:3,RECONNECT:4,ERROR:5,DATA:6,DRIVER_CHANGE:7,SUBSCRIBE:8,UNSUBSCRIBE:9,COMMIT:10,ROLLBACK:11,PUBLISH:13};var R={NOTSTARTED:"NOTSTARTED",CONNECTING:"CONNECTING",CONNECTED:"CONNECTED",RECONNECTING:"RECONNECTING",STOPPED:"STOPPED"};var j={};var M=null;var X=(function(){var al=9;var ak=false;var aB=(function(){var aK=[];var aM=10000;var aI=false;var aO;var aN=function(aP){};var aL={};aL={debugLevel:al,logs:aK,maxLogLength:aM,debugConsoleOpened:aI,_console:aO,logFunction:aN};E.log=aL;function aH(aP,aQ){var aR="EXCEPTION: "+aQ.name+" - "+aQ.message;r.log(aP,aR);}function aJ(aP){aN=aP;}return{setLogger:aJ,log:r.log,logException:aH};})();var aD=function(){return ak;};var av=function(aH){E.log.debugLevel=aH;al=aH;ak=al<9;};var ao=(function(){var aH=500;var aN=0;var aJ=0;var aI={};function aO(aQ,aP){var aR=aJ++;aI[aR]={t:aN+aP,f:aQ};return aR;}function aL(aQ){try{if(aI[aQ]){delete aI[aQ];}}catch(aP){}}function aK(){aN+=aH;aM();setTimeout(aK,aH);}function aM(){for(var aQ in aI){if(aI.hasOwnProperty(aQ)){var aP=aI[aQ];if(aN>=aP.t){aP.f();aL(aQ);}}}}aK();return{schedule:aO,cancel:aL};})();var aC=function(){var aM=[];var aI=function(aN){if(ae.getNirvanaCookie()!==undefined){return"&Connection-Type=JR&"+ae.getNirvanaCookie()+"&R="+aN.requestID;}else{return"&R="+aN.requestID;}};var aK=function(aO){var aN="";if(aO.hasTag()){aN=aN+"&T="+X.base64Encode(aO.getTag());}if(aO.hasData()){aN=aN+"&D="+aO.getData(c.BYTE_ARRAY_AS_BASE64_STRING);}if(aO.hasDictionary()){aN=aN+"&J="+aL(aO.getDictionary());}aN=aN+"&L="+aO.getTTL()+aJ(aO.getEventAttributes());return aN;};var aL=function(aT){var aV=aT.getKeys();var aW=aV.length;var aP="";for(var aQ=0;aQ<aW;aQ++){if(aQ>0){aP+=",";}var aU=aV[aQ];var aR=aT.getType(aU);aP+=encodeURIComponent(aU)+","+aR;if(aR===k.ARRAY){aR=aT.getArrayType(aU);var aN=aT.get(aU,c.LongType.LONG_AS_DECIMAL_STRING);if(aR===k.STRING||aR===k.CHARACTER){var aO=[];for(var aS=0;aS<aN.length;aS++){aO[aS]=encodeURIComponent(aN[aS]);}aN=aO;}aP+=","+aR+","+aN.length+","+aN.join(",");}else{if(aR===k.DICTIONARY){aP+=","+aL(aT.get(aU));}else{if(aR===k.STRING||aR===k.CHARACTER){aP+=","+encodeURIComponent(aT.get(aU));}else{aP+=","+aT.get(aU,c.LongType.LONG_AS_DECIMAL_STRING);}}}}return aP;};var aJ=function(aQ){var aX=0;var aP=[];var aR=i.HEADER_KEYS;var aW=aR.length;for(var aU=0;aU<aW;aU++){var aN=aQ.getAttribute(aR[aU]);if(aN||aN===0){aX=aX+(1<<aU);aP.push(encodeURIComponent(aN));}}if(aQ.getMessageType()>-1&&aQ.getMessageType()<7){var aO=i.JMS_HEADER_KEYS;var aS=aO.length;for(var aV=0;aV<aS;aV++){var aT=aQ.getAttribute(aO[aV]);if(aT||aT===0){aX=aX+(1<<(aW+aV));aP.push(encodeURIComponent(aT));}}}if(aX>0){return"&K="+aX+"&H="+aP.join(",");}return"";};aM[ab.SESSION_START]=function(aO){var aN=aO.session;return["F="+ab.SESSION_START+"&Connection-Type=JC&Y=10&V="+r.navigatorAppname()+"&P="+ae.Drivers.WireProtocol[ae.getCurrentDriver()]+"&W="+c.BUILD_NUMBER.replace(" ","-")+"&X="+c.BUILD_DATE.replace(" ","-")+"&Z="+r.navigatorPlatform()+"&S="+encodeURIComponent(aN.getUsername())+"&A="+encodeURIComponent(aN.getConfig().applicationName)+"&G="+(aN.getConfig().serverLogging?"T":"F")+"&D="+(aN.isDataStreamEnabled()?"T":"F")+"&B="+aN.getDataStreamID()+"&R="+aO.requestID+"&1Date="+new Date().getTime(),""];};aM[ab.CLIENT_CLOSE]=function(aN){return["F="+ab.CLIENT_CLOSE+aI(aN),""];};aM[ab.KEEP_ALIVE]=function(aN){return["F="+ab.KEEP_ALIVE+aI(aN),""];};aM[ab.BATCH_SUBSCRIBE]=function(aU){var aT="";var aS=aU.resources;var aN=aS.length;for(var aP=0;aP<aN;aP++){var aR=aS[aP];var aQ=aR.getResourceType();if(aP>0){aT+=",";}aT+=aR.getName();if(aQ===c.CHANNEL_RESOURCE){var aO;if(aR.getCurrentEID()>=0){aO=aR.getCurrentEID()+1;}else{aO=aR.getStartEID();}aT+=","+aO;aT+=","+encodeURIComponent(aR.getFilter());aT+=",F";}else{if(aQ===c.QUEUE_RESOURCE){aT+=",0";aT+=","+encodeURIComponent(aR.getFilter());aT+=",T";}else{if(aQ===c.TRANSACTIONAL_QUEUE_RESOURCE){aT+=","+aR.getWindowSize();aT+=","+encodeURIComponent(aR.getFilter());aT+=",T";}else{aT+=",0";aT+=","+encodeURIComponent(aR.getFilter());aT+=",F";}}}}return["F="+ab.BATCH_SUBSCRIBE+aI(aU),"E="+aN+"&N="+aT];};aM[ab.RESOURCE_SUBSCRIBE]=function(aN){aN.resources=[aN.resource];return aM[ab.BATCH_SUBSCRIBE](aN);};aM[ab.RESOURCE_PUBLISH]=function(aP){var aO=aP.resource;var aN=aP.event;return["F="+ab.RESOURCE_PUBLISH+aI(aP),"N="+aO.getName()+aK(aN)];};aM[ab.RESOURCE_UNSUBSCRIBE]=function(aQ){var aP=aQ.resource;var aO=aP.getResourceType();var aN=["F="+ab.RESOURCE_UNSUBSCRIBE+aI(aQ),"N="+aP.getName()];if(aO===c.QUEUE_RESOURCE||aO===c.TRANSACTIONAL_QUEUE_RESOURCE){aN[1]=aN[1]+"&Q=T";}return aN;};aM[ab.QUEUE_COMMIT]=function(aP){var aO=aP.resource;var aN=aP.event;return["F="+ab.QUEUE_COMMIT+aI(aP),"N="+aO.getName()+"&E="+aN.getEID()];};aM[ab.QUEUE_ROLLBACK]=function(aP){var aO=aP.resource;var aN=aP.event;return["F="+ab.QUEUE_ROLLBACK+aI(aP),"N="+aO.getName()+"&E="+aN.getEID()];};aM[ab.TX_PUBLISH]=function(aQ){var aO=aQ.resource;var aP=aQ.transaction;var aN=aQ.event;return["F="+ab.TX_PUBLISH+aI(aQ),"N="+aO.getName()+"&X="+aP.getTxID()+aK(aN)];};aM[ab.TX_IS_COMMITTED]=function(aO){var aN=aO.transaction;return["F="+ab.TX_IS_COMMITTED+aI(aO),"X="+aN.getTxID()];};var aH=function(aN){if(X.isLoggingEnabled()){X.Logger.log(3,"[HTTP Request Factory] Building Request from Command "+ad(aN.requestType));}return aM[aN.requestType](aN);};return{buildRequest:aH};};var ag=function(aL){var aK=[];var aJ=false;var aH=function(aQ,aR,aP){var aS;if(aQ.Dictionary){aS=aM(aQ.Dictionary);}var aO=new i(aQ.h);var aN;if(aQ.Tag){aN=X.base64Decode(aQ.Tag);}return new W(aL,aQ.EID,aR,aP,aO,aQ.Data,aN,aS);};var aM=function(aR){if(X.isLoggingEnabled()){X.Logger.log(3,"[HTTP Response Factory] Building Event Dictionary ",aR);}for(var aU in aR){if(aR.hasOwnProperty(aU)){var aT=aR[aU];if(aT[0]===k.STRING||aT[0]===k.CHARACTER){aT[1]=decodeURIComponent(aT[1]);}else{if(aT[0]===k.DICTIONARY){aT[1]=aM(aT[1]);}else{if(aT[0]===k.ARRAY){if(aT[1]===k.STRING||aT[1]===k.CHARACTER){var aV=aT[2];var aQ=aV.length;for(var aP=0;aP<aQ;aP++){aV[aP]=decodeURIComponent(aV[aP]);}}else{if(aT[1]===k.DICTIONARY){var aS=aT[2];var aN=aS.length;for(var aO=0;aO<aN;aO++){aS[aO]=aM(aS[aO]);}}}}}}}}return new k(aR,true);};aK[ab.SESSION_START]=function(aN,aO){if(X.isLoggingEnabled()){X.Logger.log(6,"[HTTP Response Factory] Received Session Start Response for Command "+aO.requestType,aN,aO);}if(aN[1]){aL.setSessionID(aN[2]);aL.setDataStreamID(aN[3]);ae.onConnect(aN[4]);s.setReady(true);if(aO.reconnect){aL.notifyListeners(u.RECONNECT,aL,aN[3]);}else{aL.notifyListeners(u.START,aL,aN[3]);}}else{if(X.isLoggingEnabled()){X.Logger.log(6,"[HTTP Response Factory] Session Connection Error: "+aN[2]);}aL.notifyListeners(u.ERROR,aL,{name:"SessionConnectException",message:aN[2]});}};aK[ab.BATCH_SUBSCRIBE]=function(aQ,aP){if(X.isLoggingEnabled()){X.Logger.log(3,"[HTTP Response Factory] Received Batch Subscribe Callback for Command "+aP.requestType,aQ,aP);}var aN=aP.resources;var aV=aQ.slice(1);var aR=aP.resubscribe;var aU=aN.length;for(var aS=0;aS<aU;aS++){var aO=aN[aS];var aY=aV[aS];var aX=aY[1];aO.setSubscribed(aX);if(aX){aO.setAlias(aY[2]);if(!aR){aO.notifyListeners(c.Observe.SUBSCRIBE,aO,"OK");}}else{var aT=aY[2];var aW;if(aT){if(aT.indexOf("SECURITY")!==-1){aW=new m(aT);}else{if(aT.indexOf("Channel Not Found")!==-1){aW=new o(aO.getName(),aT);}else{aW=new y(aT);}}}if(!aW){aW=new y("Unknown Error Occurred");}aO.notifyListeners(c.Observe.ERROR,aO,aW);}}};aK[ab.KEEP_ALIVE]=function(aN,aO){if(X.isLoggingEnabled()){X.Logger.log(3,"[HTTP Response Factory] Processing KA Response "+aN.toString());}};aK[ab.RESOURCE_PUBLISH]=function(aN,aS){if(X.isLoggingEnabled()){X.Logger.log(3,"[HTTP Response Factory] Received Publish Callback for Command "+aS.requestType,aN,aS);}var aP=aS.resource;var aR=aN[1];if(aR){aP.notifyListeners(u.PUBLISH,aP,aR);}else{var aQ=aN[2];var aO;if(aQ&&aQ.indexOf("SECURITY")!==-1){aO=new m(aQ);}else{aO=new y(aQ);}aP.notifyListeners(u.ERROR,aP,aO);}};aK[ab.RESOURCE_UNSUBSCRIBE]=function(aN,aP){if(X.isLoggingEnabled()){X.Logger.log(3,"[HTTP Response Factory] Received Resource unsubscribe Callback for Command "+aP.requestType);}var aO=aP.resource;aO.setSubscribed(false);aO.notifyListeners(u.UNSUBSCRIBE,aO,"OK");};aK[ab.PACKET_RECEIVE]=function(aN){if(aL.getLongPollRequestID()<aN[1]){aL.setLongPollRequestID(aN[1]);}else{ae.onError("Data received out of order, reset required. Expected packet "+(aL.getLongPollRequestID()+1)+" but received "+aN[1]);}};aK[ab.EVENT_RECEIVE]=function(aT){if(X.isLoggingEnabled()){X.Logger.log(3,"[HTTP Response Factory] Received Event",aT);}var aQ=aT[1];var aN=aQ.dg==="1";var aS;var aP;var aO;if(!aN){aS=aL.getResourceByAlias(aQ.CNAME);if(!aS){if(X.isLoggingEnabled()){X.Logger.log(3,"[HTTP Response Factory] Event was for non-existent resource: "+aQ.CNAME);}return;}aP=aS.getResourceType();aO=aS.getName();}else{aS=aL;aP=-1;aO=aL.getGroupName(aQ.CNAME);}var aR=aH(aQ,aS,aO);if(aS){if(aP===c.CHANNEL_RESOURCE){aS.setCurrentEID(aR.getEID());}aS.notifyListeners(u.DATA,aR);}};aK[ab.SET_RESOURCE_ALIAS]=function(aQ){var aP=aQ[1];var aN=aQ[2];var aO=aQ[3];if(aP=="3"){aL.setGroupAlias(aN,aO);}else{aL.setResourceAlias(aN,aO);}};aK[ab.QUEUE_COMMIT]=function(aN,aP){if(X.isLoggingEnabled()){X.Logger.log(3,"[HTTP Response Factory] Received Queue Commit Response",aN,aP);}var aO=aP.resource;aO.notifyListeners(u.COMMIT,aO,aN[1]);};aK[ab.QUEUE_ROLLBACK]=function(aN,aP){if(X.isLoggingEnabled()){X.Logger.log(3,"[HTTP Response Factory] Received Queue Rollback Response",aN,aP);}var aO=aP.resource;aO.notifyListeners(u.ROLLBACK,aO,aN[1]);};aK[ab.TX_PUBLISH]=function(aO,aQ){var aN=aO[1];var aP=aQ.transaction;if(aN){aP.notifyListeners(u.COMMIT,aP,true);aP.setIsCommitted(true);}else{aP.notifyListeners(u.COMMIT,aP,false);aP.notifyListeners(u.ERROR,aP,aO[2]);aP.setIsCommitted(false);}};aK[ab.TX_IS_COMMITTED]=function(aN,aP){var aO=aP.transaction;aO.notifyListeners(u.COMMIT,aO,aN[1]);aO.setIsCommitted(true);};aK[ab.CLIENT_CLOSE]=function(aN,aO){if(aO.clientRequest){if(X.isLoggingEnabled()){X.Logger.log(6,"[HTTP Response Factory] Received Client Close Session Response "+ad(aN[0])+" for command "+ad(aO));}ae.stop();aL.notifyListeners(u.STOP,aL,true);}else{if(X.isLoggingEnabled()){X.Logger.log(4,"[HTTP Response Factory] Received Internal Close Session Response "+ad(aN[0])+" for command "+ad(aO));}ae.onError("Internal close session processed for driver reset");}};function aI(aO){var aP=aO.d;if(X.isLoggingEnabled()){X.Logger.log(3,"[HTTP Response Factory] Dispatching response "+ad(aP[0]));}var aN=aP[0];if(aN==ab.SESSION_START){aJ=false;}if(!aJ&&aN!==ab.SESSION_START){aJ=true;ae.setPreferredDriver();}if(aN===ab.EVENT_RECEIVE||aN===ab.PACKET_RECEIVE||aN===ab.SET_RESOURCE_ALIAS){aK[aN](aP);}else{var aQ=s.dequeueCommand(aO.r);if(aQ===null&&aN!==ab.KEEP_ALIVE){if(X.isLoggingEnabled()){X.Logger.log(6,"[HTTP Response Factory] Command is null");}return false;}aK[aN](aP,aQ);if(aQ!==null&&aN!==ab.SESSION_START){return true;}}return false;}return{dispatchResponse:aI};};var ax={counter:0,collection:{}};E.postMessageProxies=ax;var ar;var aj=function(aM,aK){var aJ="";var aU,aS,aQ,aT,aR,aP,aN;var aL=0;var aI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var aO=function(aW){var aV="";if(aW<128){aV+=String.fromCharCode(aW);}else{if(aW>127&&aW<2048){aV+=String.fromCharCode((aW>>6)|192);aV+=String.fromCharCode((aW&63)|128);}else{aV+=String.fromCharCode((aW>>12)|224);aV+=String.fromCharCode(((aW>>6)&63)|128);aV+=String.fromCharCode((aW&63)|128);}}return aV;};var aH=function(aW){var aV="";aW=aW.replace(/\r\n/g,"\n");for(var aY=0;aY<aW.length;aY++){var aX=aW.charCodeAt(aY);aV+=aO(aX);}return aV;};if(!aK){aM=aH(aM);}while(aL<aM.length){if(aK){aU=aM[aL++];aS=aM[aL++];aQ=aM[aL++];}else{aU=aM.charCodeAt(aL++);aS=aM.charCodeAt(aL++);aQ=aM.charCodeAt(aL++);}aT=aU>>2;aR=((aU&3)<<4)|(aS>>4);aP=((aS&15)<<2)|(aQ>>6);aN=aQ&63;if(aL-2===aM.length||isNaN(aS)){aP=aN=64;}else{if(aL-1===aM.length||isNaN(aQ)){aN=64;}}aJ=aJ+aI.charAt(aT)+aI.charAt(aR)+aI.charAt(aP)+aI.charAt(aN);}return aJ;};if(typeof btoa==="undefined"){ar=aj;}else{ar=function(aI,aH){if(aH){return aj(aI,aH);}else{return am(aI);}};}var ay;var at=function(aN,aI){var aK="";var aU,aS,aQ;var aT,aR,aP,aO;var aL=0;var aJ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var aM=function(aV){var aX="";var aZ=0;var aY=0;var aW=0;var a0=0;while(aZ<aV.length){a0=aV.charCodeAt(aZ);if(a0<128){aX+=String.fromCharCode(a0);aZ++;}else{if(a0>191&&a0<224){aY=aV.charCodeAt(aZ+1);aX+=String.fromCharCode(((a0&31)<<6)|(aY&63));aZ+=2;}else{aY=aV.charCodeAt(aZ+1);aW=aV.charCodeAt(aZ+2);aX+=String.fromCharCode(((a0&15)<<12)|((aY&63)<<6)|(aW&63));aZ+=3;}}}return aX;};aN=aN.replace(/[^A-Za-z0-9\+\/=]/g,"");var aH=[];while(aL<aN.length){aT=aJ.indexOf(aN.charAt(aL++));aR=aJ.indexOf(aN.charAt(aL++));aP=aJ.indexOf(aN.charAt(aL++));aO=aJ.indexOf(aN.charAt(aL++));aU=(aT<<2)|(aR>>4);aS=((aR&15)<<4)|(aP>>2);aQ=((aP&3)<<6)|aO;aK=aK+String.fromCharCode(aU);if(aI){aH.push(aU);}if(aP!=64){aK=aK+String.fromCharCode(aS);if(aI){aH.push(aS);}}if(aO!=64){aK=aK+String.fromCharCode(aQ);if(aI){aH.push(aQ);}}}if(aI){return aH;}else{return aM(aK);}};if(typeof atob==="undefined"){ay=at;}else{ay=function(aI,aH){if(aH){return at(aI,aH);}else{return aA(aI);}};}var aw=0;function ah(){return aw++;}function aE(){var aH=function(){return(((1+Math.random())*65536)|0).toString(16).substring(1);};return aH()+aH()+"-"+aH()+"-"+aH()+"-"+aH()+"-"+aH()+aH()+aH();}function az(aH){if(aH.match(/https?:\/\/[^\/]+/)){return aH.match(/https?:\/\/[^\/]+/)[0];}else{return aH;}}function au(aH){return aH.match(/^([a-z]+):\/\//)[0];}function ap(aH){aH=az(aH);if(!aH.match(/:[0-9]+$/)){if(aH.match(/^https:/)){aH+=":443";}else{aH+=":80";}}return aH;}function af(aH){aH=aH.replace(/[^A-Za-z0-9\/_\-#]+/gi,"");if(aH.match(/^[^\/].*?\//)){aH="/"+aH;}return aH;}var an=4294967296;function ai(aM,aI){if(aI&&Array.isArray(aI)){if(aM==c.LongType.LONG_AS_ARRAY){return aI;}var aH=false;var aL=aI[0];var aJ=aI[1];if(aL-2147483647>0){aL-=2147483648;aH=true;}if(aM==c.LongType.LONG_AS_DECIMAL_STRING){return aF(aL,aJ,aH);}else{if(aM==c.LongType.LONG_AS_HEXADECIMAL_STRING){return aG(aL,aJ,aH);}else{var aK=aL*an+aJ;if(aH){aK=-aK;}return aK;}}}else{return aI;}}function aG(aJ,aI,aH){var aK=aI.toString(16);if(aJ!==0){while(aK.length<8){aK="0"+aK;}aK=aJ.toString(16)+aK;}if(aH){aK="-"+aK;}return aK;}function aF(aO,aM,aK){if(aO<0){return"-9223372036854775808";}var aN="";var aP,aQ,aH,aJ,aL,aI;aL=aM&65535;aJ=(aM>>16)&65535;if(aO<0){aO=-aO;}aH=aO&65535;aQ=(aO>>16)&65535;aL=656*aQ+7296*aH+5536*aJ+aL;aI=parseInt(aL/10000,10);aL=aL%10000;aJ=aI+7671*aQ+9496*aH+6*aJ;aI=parseInt(aJ/10000,10);aJ=aJ%10000;aH=aI+4749*aQ+42*aH;aI=parseInt(aH/10000,10);aH=aH%10000;aQ=aI+281*aQ;aI=parseInt(aQ/10000,10);aQ=aQ%10000;aP=aI;if(aP!==0){aN+=aP.toString();}if(aN.length!==0){aN+=aq(aQ);}else{if(aQ!==0){aN+=aQ.toString();}}if(aN.length!==0){aN+=aq(aH);}else{if(aH!==0){aN+=aH.toString();}}if(aN.length!==0){aN+=aq(aJ);}else{if(aJ!==0){aN+=aJ.toString();}}if(aN.length!==0){aN+=aq(aL);}else{aN+=aL.toString();}if(aK){aN="-"+aN;}return aN;}function aq(aI){var aH=""+aI;while(aH.length<4){aH="0"+aH;}return aH;}function aA(aH){return decodeURIComponent(escape(atob(aH)));}function am(aH){return btoa(unescape(encodeURIComponent(aH)));}return{Logger:aB,Scheduler:ao,isLoggingEnabled:aD,setDebugLevel:av,HTTPRequestFactory:aC,HTTPResponseFactory:ag,base64Encode:ar,base64Decode:ay,getCookie:r.getCookie,setCookie:r.setCookie,getCanonicalResourceName:af,getCanonicalOrigin:ap,getUrlProtocol:au,generateTransactionID:ah,generateUniqueID:aE,JSONP_Poller:r.JSONP_Poller,convertLongFromServer:ai};})();var ae=(function(){var az;var aB=false;var at=null;var aE=0;var aQ;var aq=null;var aY;var ag;var am=false;var aD=0;var al=0;var a0=0;var aO=0;var a3=0;var aM=1000;var ah=3;var aS=(Math.floor(Math.random()*30)+30)*1000;var aV=60000;var aR;function a2(){var a4=ae.getCurrentDriver();E.preferredDrivers=[a4];a0=0;if(X.isLoggingEnabled()){X.Logger.log(7,"[Transport] Settled on preferred driver: "+a4);}if(ax().rememberDriver){if(X.getCookie("NirvanaDriver")===null){X.setCookie("NirvanaDriver",a4);}}}function ap(){if(X.isLoggingEnabled()){X.Logger.log(4,"[Transport] Remaining drivers: "+E.preferredDrivers.join());}if(E.preferredDrivers.length>1){a0=(a0+1)%E.preferredDrivers.length;if(a0>0||ag.realms.length===1){aY.notifyListeners(c.Observe.DRIVER_CHANGE,aY,E.preferredDrivers[a0]);}al=0;}if(a0===0){a1();}}function a1(){var a4=(aO+1)%ag.realms.length;if(aO!=a4){if(X.isLoggingEnabled()){X.Logger.log(6,"[Transport] Moving to another realm: "+ag.realms[a4]);}aO=a4;aY.notifyListeners(c.Observe.REALM_CHANGE,aY,ag.realms[aO]);al=0;r.setPreferredDrivers(aY.getConfig().drivers,ag.applyUserAgentHeuristics,false);}}function ao(){if(E.preferredDrivers.length){var a4=r.Drivers.createDriver(E.preferredDrivers[a0]);if(X.isLoggingEnabled()){X.Logger.log(6,"[Transport] Attempting to use Driver: "+a4.name);}if(!a4.isClientSupported()){if(X.isLoggingEnabled()){X.Logger.log(7,"[Transport] Driver not supported: "+a4.name);}aW.splice(a0,1);if(aW.length<=a0){a0=0;}aY.notifyListeners(c.Observe.DRIVER_CHANGE,aY,aW[a0]);return ao();}else{return a4;}}else{return null;}}function ay(a4){return Drivers.createDriver(a4).isClientSupported();}function aP(a5,a4){if(X.isLoggingEnabled()){X.Logger.log(6,"[Transport] Setting Up");}aY=a5;ag=a5.getConfig();r.setPreferredDrivers(ag.drivers,ag.applyUserAgentHeuristics,a4,aY);}function aG(){if(X.isLoggingEnabled()){X.Logger.log(6,"[Transport] Opening Driver to "+ag.realms[aO]);}aY.setLongPollRequestID(-1);aQ=ae.initializeDriver();if(aQ!==null){af("driver.open",ag.openDriverTimeout);aQ.open();}else{var a4=new H(ag.drivers);aY.notifyListeners(c.Observe.ERROR,aY,a4);r.openListenerManager(aY,a4);}}function aw(){am=false;if(X.isLoggingEnabled()){X.Logger.log(6,"[Transport] Tearing Down Driver");}if(aQ!==null){s.setReady(false);clearTimeout(az);aU();aQ.close();aQ=null;if(aY.getStatus()===R.CONNECTED){aY.notifyListeners(c.Observe.DISCONNECT,aY,"Session Disconnected");}}}function aZ(){return E.preferredDrivers[a0];}function aX(){return ag.realms[aO];}function aT(){return aY;}function ax(){return ag;}function av(){return aQ;}function au(){return aE;}function aF(){aE++;return aE;}function aC(){aw();aE=0;}function an(){return aq;}function ar(a4){aq=a4;al=0;aD=0;a3=new Date();am=true;}function aL(){return am;}function aH(){if(X.isLoggingEnabled()){X.Logger.log(4,"[Transport] Received Driver OnOpen Callback");}if(aY.getStatus()==R.CONNECTING){s.resetMessagesOnQueue();}s.setReady(true);}function aA(a4){al++;s.setReady(false);if(X.isLoggingEnabled()){X.Logger.log(4,"[Transport] Received Driver OnError Callback with error: "+a4);}if(aY.getStatus()===R.STOPPED){aw();}else{if(X.isLoggingEnabled()){X.Logger.log(3,"[Transport] Driver failure count: "+al);}if(al>=ah){if(X.isLoggingEnabled()){X.Logger.log(3,"[Transport] Driver failure reached maximum permitted count: "+ah);}ap();}ai("Driver Error: "+a4);}}function aN(){if(X.isLoggingEnabled()){X.Logger.log(6,"[Transport] Received Driver OnClose Callback");}}function aU(){if(at!==undefined&&at!==null){if(X.isLoggingEnabled()){X.Logger.log(2,"[Transport] Clearing Scheduler resetTimeoutID : "+at);}X.Scheduler.cancel(at);at=null;}}function af(a4,a5){aU();at=X.Scheduler.schedule(function(){aA("Request Timed Out, "+a4);},a5);if(X.isLoggingEnabled()){X.Logger.log(2,"[Transport] Setting Scheduler resetTimeoutID  : "+at+" for request: "+a4);}}function aK(a5){if(aQ===null){return;}aB=true;var a4=aY.requestFactory.buildRequest(a5);if(X.isLoggingEnabled()){X.Logger.log(3,"[Transport] Sending request number "+a5.requestID+" of "+aE+" for "+ad(a5.requestType)+" "+a4);}if(aQ&&aQ.usesKeepAlive()){ak(a5.session);}af(a4,ag.sendResponseTimeout);aQ.send(a5,a4);}function aj(a6){if(X.isLoggingEnabled()){X.Logger.log(2,"[Transport] Receiving Data: "+JSON.stringify(a6));}aU();aB=false;var a4=false;if(a6){for(var a5=0;a5<a6.length;a5++){if(aY.responseFactory.dispatchResponse(a6[a5])){a4=true;if(a6[a5].d[0]==ab.CLIENT_CLOSE){return a4;}}}}return a4;}function aI(a4){if(a4.length>0){return aj(JSON.parse(a4));}return false;}function ak(a4){if(X.isLoggingEnabled()){X.Logger.log(2,"[Transport] (Re)Scheduling KeepAlive to occur in "+aV+" ms");}clearTimeout(az);az=setTimeout(function(){aJ(a4);},aV);}function aJ(a4){if(aB){if(X.isLoggingEnabled()){X.Logger.log(2,"[Transport] Currently inRequest.");}ak(a4);}else{if(X.isLoggingEnabled()){X.Logger.log(3,"[Transport] Sending KeepAlive");}s.prioritizeCommand({requestType:ab.KEEP_ALIVE,session:a4});}}function ai(bb){if(X.isLoggingEnabled()){X.Logger.log(7,"[Transport] Resetting the Session. Reason: "+bb);}aw();var bc;if(ag.realms.length>1){bc=aM*al;}else{bc=Math.min(aS,aM*aD);}if(aY.getStatus()===R.CONNECTED){if(X.isLoggingEnabled()){X.Logger.log(4,"[Transport] Adding Restart Request to Outbound Engine");}if(a3+10000<new Date()){aD=0;}aY.setStatus(R.RECONNECTING);var a5=[];var a4=aY.getResources();var a6=a4.length;for(var ba=0;ba<a6;ba++){if(a4[ba].isSubscribed()){a5.push(a4[ba]);}}if(a5.length>0){var a7={requestType:ab.BATCH_SUBSCRIBE,session:aY,resources:a5,resubscribe:true};s.prioritizeCommand(a7);}var a8={requestType:ab.SESSION_START,session:aY,reconnect:true};s.prioritizeCommand(a8);s.resetMessagesOnQueue();}if(aY.getStatus()===R.RECONNECTING||aY.getStatus()===R.CONNECTING){aD++;var a9=s.peek();if(a9===null||a9===undefined||a9.requestType!==ab.SESSION_START){s.prioritizeCommand({requestType:ab.SESSION_START,session:aY,reconnect:aY.getStatus()==R.RECONNECTING});}if(X.isLoggingEnabled()){X.Logger.log(6,"[Transport] Recreating Driver to "+aY.getStatus()+". Delaying open() for "+bc+"ms");}if(aR){clearTimeout(aR);}aR=setTimeout(aG,bc);}}var aW=[];E.currentSession=aY;E.preferredDrivers=aW;E.defaultDrivers=r.defaultDrivers;E.PrivateConstants=ab;E.ListenerManagers=j;return{Drivers:r.Drivers,initializeDriver:ao,supportsDriver:ay,setPreferredDriver:a2,setUp:aP,open:aG,tearDown:aw,getCurrentDriver:aZ,getCurrentRealm:aX,getCurrentSession:aT,getConfig:ax,getDriver:av,getRequestCount:au,getRequestCountIncrement:aF,stop:aC,getNirvanaCookie:an,onConnect:ar,onOpen:aH,onError:aA,onClose:aN,send:aK,c:aj,d:aI,isConnected:aL};})();E.Transport=ae;E.Utils=X;var s=(function(){var am=false;var ah=[];function ai(){if(am&&ah.length>0){var ao=an();if(ao!==null){if(ao.requestType==ab.SESSION_START&&ae.getCurrentSession().getStatus()===R.CONNECTED){X.Logger.log(3,"[Outbound Engine] Dequeueing unnecessary session start request as already connected.","Req #"+ao.requestID);s.dequeueCommand(ao.requestID);ai();}else{am=false;ao.sent=true;if(X.isLoggingEnabled()){X.Logger.log(3,"[Outbound Engine] Sending Command to Transport Layer.","Req #"+ao.requestID);}ae.send(ao);}}}}function af(ao){am=ao;ai();}function aj(ao){ao.requestID=ae.getRequestCountIncrement();ao.sent=false;if(X.isLoggingEnabled()){X.Logger.log(3,"[Outbound Engine] Queueing Command "+ad(ao.requestType),ao);}ah.push(ao);ai();}function al(ao){ao.requestID=ae.getRequestCountIncrement();ao.sent=false;ah.unshift(ao);if(X.isLoggingEnabled()){X.Logger.log(3,"[Outbound Engine] Prioritizing Command "+ad(ao.requestType),ao);}ai();}function ag(at){var ap=ah.length;if(X.isLoggingEnabled()){var ao="";for(var aq=0;aq<ap;aq++){ao+=ad(ah[aq].requestType)+" ";}X.Logger.log(2,"[Outbound Engine] OutboundQueue = "+ao);}for(var ar=0;ar<ap;ar++){if(ah[ar].requestID==at){if(X.isLoggingEnabled()){X.Logger.log(3,"[Outbound Engine] Dequeueing Command "+ad(ah[ar].requestType),ah[ar],at);}return ah.splice(ar,1)[0];}}if(X.isLoggingEnabled()){X.Logger.log(3,"[Outbound Engine] No matching queued command to dequeue for request ID: ",at);}return null;}function ak(){if(X.isLoggingEnabled()){X.Logger.log(2,"[Outbound Engine] Resetting messages on outbound queue");}for(var ao=0;ao<ah.length;ao++){if(ah[ao].requestType===ab.KEEP_ALIVE||ah[ao].requestType===ab.CLIENT_CLOSE){ah.splice(ao,1);}else{ah[ao].sent=false;ah[ao].requestID=ae.getRequestCountIncrement();}}}function an(){var ao=ah.length;for(var ap=0;ap<ao;ap++){if(!ah[ap].sent){return ah[ap];}}return null;}return{setReady:af,queueCommand:aj,resetMessagesOnQueue:ak,prioritizeCommand:al,dequeueCommand:ag,peek:an};})();E.OutboundEngine=s;var I;function g(){var ah=[];var ag=false;var af=function(ao,an){var al=ah[ao];if(!ah[ao]){al=[];ah[ao]=al;}var am=al.length;for(var ak=0;ak<am;ak++){if(an==al[ak]){return;}}if(ag){al=al.slice(0);ah[ao]=al;}al.push(an);};var ai=function(ao,an){var al=ah[ao];if(!al){return;}if(an===true){al=[];ah[ao]=al;}if(ag){al=al.slice(0);ah[ao]=al;}var am=al.length;for(var ak=0;ak<am;ak++){if(an==al[ak]){al.splice(ak,1);return;}}};var aj=function(ar,aq,ap){var am=ah[ar];if(!am){return;}ag=true;var an=am.length;for(var al=0;al<an;al++){var ao=am[al];if(X.isLoggingEnabled()){X.Logger.log(0,"[NotifyListeners] "+ao+" : "+ap);}try{ao(aq,ap);}catch(ak){if(X.isLoggingEnabled()){X.Logger.logException(9,ak);}}}ag=false;};a.notifyListeners=aj;return{on:af,removeListener:ai,notifyListeners:aj};}function V(ag,af){j[ag]=af;}function v(af){this.name="AlreadySubscribedException";if(typeof af!="undefined"&&af!==null){this.message="Already subscribed to "+af;}if(X.isLoggingEnabled()){X.Logger.log(7,"["+this.name+"] "+this.message);}}function K(af){this.name="InvalidDriverException";if(typeof af!="undefined"&&af!==null){this.message=af+" is not a valid driver name";}if(X.isLoggingEnabled()){X.Logger.log(7,"["+this.name+"] "+this.message);}}function H(af){this.name="NoValidDriversException";this.message="This client does not support any of the currently configured drivers";if(X.isLoggingEnabled()){X.Logger.log(8,"["+this.name+"] "+this.message,af);}}function e(af,ag){this.name="DriverSecurityException";if(typeof af!="undefined"&&af!==null){this.message=af+" - "+ag;}if(X.isLoggingEnabled()){X.Logger.log(7,"["+this.name+"] "+this.message);}}function G(af,ag){this.name="AlreadyCommittedException";this.message="Already Committed Transaction "+ag+" to resource "+af;if(X.isLoggingEnabled()){X.Logger.log(7,"["+this.name+"] "+this.message);}}function D(af,ag){this.name="SessionException";if(typeof af!="undefined"&&af!==null){this.message=af+" - "+ag;}if(X.isLoggingEnabled()){X.Logger.log(7,"["+this.name+"] "+this.message);}}function m(af){this.name="SecurityException";this.message=af;if(X.isLoggingEnabled()){X.Logger.log(7,"["+this.name+"] "+this.message);}}function o(ag,af){this.name="MissingResourceException";this.resourceName=ag;this.message=af;if(X.isLoggingEnabled()){X.Logger.log(7,"["+this.name+"] "+this.message);}}function y(af){this.name="GenericException";if(af){this.errorMessage=af;}if(X.isLoggingEnabled()){X.Logger.log(7,"["+this.name+"] "+this.errorMessage);}}var q;q={InvalidDriverException:K,SessionException:D,DriverSecurityException:e};E.exceptions=q;function aa(af){if(I){if(I.getStatus()!==R.STOPPED&&I.getStatus()!==R.NOTSTARTED){M.notifyListeners(c.Observe.ERROR,I,{name:"SessionExistsException",message:"Cannot Create Session: Session Already Exists"});return undefined;}}I=new F(ag(af));return I;function ag(aj){function al(ap,ao){if(typeof ap=="undefined"||ap===null){return ao;}return !!ap;}function an(ap,ao){ap=parseInt(ap,10);if(isNaN(ap)){ap=ao;}return ap;}if(typeof aj=="undefined"||aj===null){aj={};}aj.debugLevel=an(aj.debugLevel,9);X.setDebugLevel(aj.debugLevel);if(typeof aj.applicationName=="undefined"){aj.applicationName="GenericJSClient";}if(typeof aj.sessionName=="undefined"){aj.sessionName="GenericJSSession";}if(typeof aj.username=="undefined"){aj.username="JSUser_"+X.generateUniqueID();}if(typeof aj.crossDomainPath=="undefined"){aj.crossDomainPath="/out";}if(typeof aj.realms=="undefined"){aj.realms=r.getFormatedUrlRealm(aj);}var ak=r.getCurrentDomainUrl();aj.currentDomain=ak;aj.serverLogging=al(aj.serverLogging,false);aj.verboseKeepalives=al(aj.verboseKeepalives,false);aj.enableDataStreams=al(aj.enableDataStreams,true);aj.sessionTimeoutMs=an(aj.sessionTimeoutMs,120000);aj.sendResponseTimeout=an(aj.sendResponseTimeout,10000);aj.openDriverTimeout=an(aj.openDriverTimeout,15000);aj.maxStreamLengthStreamingCors=an(aj.maxStreamLengthStreamingCors,10000000);aj.rememberDriver=al(aj.rememberDriver,false);aj.applyUserAgentHeuristics=al(aj.applyUserAgentHeuristics,false);if(X.isLoggingEnabled()){var ai="";for(var ah in aj){if(aj.hasOwnProperty(ah)){var am=aj[ah];ai+=ah+":\t";if(am.constructor==Array){ai+=am.join("\n\t\t");}else{ai+=am;}ai+="\n";}}r.log(5,"[Session] Configuration:\n"+ai);}return aj;}}function U(){return new W(undefined,-1,undefined,undefined,undefined,undefined,undefined,undefined);}function p(){return k.createDictionary();}function O(ag,af){M=g();if(M===null){V(c,M);}M.on(ag,af);}function h(ag,af){M.removeListener(ag,af);}function F(ai){var ak;var ap=this;var an=g();var aj=ai;var ao="-1";var af="";var al=R.NOTSTARTED;var am=-1;var ah=[];var ag={};ag.g1="";V(ap,an);this.start=function(){if(!(al===R.NOTSTARTED||al===R.STOPPED)){var at=new D("Nirvana Session","start() can only be invoked on a new or stopped session");r.notifyListenersManagerStart(ak,at);return ak;}var ar=al===R.STOPPED;if(r.getElementofDriverDomOnjContainer()===null){c.initialize();if(X.isLoggingEnabled()){X.Logger.log(1,"[Nirvana] Waiting for DOM to be ready");}setTimeout(ap.start,15);return ak;}if(X.isLoggingEnabled()){X.Logger.log(6,"[Session] Creating Session");}al=R.CONNECTING;var au={session:ap,requestType:ab.SESSION_START,listenerManager:an};s.prioritizeCommand(au);ae.setUp(ap,ar);ae.open();var aq=function(){ap.stop(true);};r.addClientEventListener(aq);return ak;};this.stop=function(aq){if(X.isLoggingEnabled()){X.Logger.log(6,"[Session] Stopping Session");}if(al===R.STOPPED||al===R.NOTSTARTED){return ak;}al=R.STOPPED;var ar={requestType:ab.CLIENT_CLOSE,clientRequest:true};if(aq){s.prioritizeCommand(ar);}else{s.queueCommand(ar);}return ak;};this.destroy=function(){this.stop();I=null;return ak;};this.subscribe=function(aq){try{var aw=[];for(var av=0;av<aq.length;av++){var au=aq[av];if(au.isSubscribed()){var at=new v(au.getName());au.notifyListeners(c.Observe.ERROR,au,at);an.notifyListeners(c.Observe.ERROR,ak,at);r.subscribeListenerManager(ak,at);}else{aw.push(ap.getResourceByName(au.getName()));}}if(aq.length){var ax=ap.prepareCommand(ab.BATCH_SUBSCRIBE);ax.resources=aw;s.queueCommand(ax);}}catch(ar){if(X.isLoggingEnabled()){X.Logger.logException(8,ar);}r.subscribeNotifyListener(ak,ar);}return ak;};this.getChannel=function(aq){aq=X.getCanonicalResourceName(aq);var ar=ap.getResourceByName(aq);if(!ar){var at=g();ar=new P(aq,at,ap);V(ar,at);}else{return ar.getClientResource();}return ar;};this.getQueue=function(au,ar){au=X.getCanonicalResourceName(au);var aq=ap.getResourceByName(au);if(!aq){var at=g();if(ar){aq=new Q(au,at,ap);}else{aq=new ac(au,at,ap);}V(aq,at);}else{return aq.getClientResource();}return aq;};this.notifyListeners=function(at,ar,aq){an.notifyListeners(at,ar,aq);};this.on=function(ar,aq){an.on(ar,aq);return ak;};this.removeListener=function(ar,aq){an.removeListener(ar,aq);return ak;};this.getUsername=function(){return aj.username;};this.getCurrentDriver=function(){return ae.getCurrentDriver();};this.getCurrentRealm=function(){return ae.getCurrentRealm();};this.pushResource=function(aq){ah.push(aq);};this.setGroupAlias=function(ar,aq){ag[aq]=ar;};this.getGroupName=function(aq){return ag[aq];};this.getResources=function(){return ah;};this.getResourceByName=function(ar){var at=ah.length;for(var aq=0;aq<at;aq++){var au=ah[aq];if(au.getName()==ar){return au;}}};this.setResourceAlias=function(ar,av){var at=ah.length;for(var aq=0;aq<at;aq++){var au=ah[aq];if(au.getName()===ar){au.setAlias(av);return;}}};this.getResourceByAlias=function(au){var ar=ah.length;for(var aq=0;aq<ar;aq++){var at=ah[aq];if(at.getAlias()===au){return at;}}};this.setSessionID=function(aq){ao=""+aq;al=R.CONNECTED;};this.setDataStreamID=function(aq){af=""+aq;};this.getLongPollRequestID=function(){return am;};this.setLongPollRequestID=function(aq){am=aq;};this.getSessionID=function(){return ao;};this.getDataStreamID=function(){return af;};this.getConfig=function(){return aj;};this.setStatus=function(aq){al=aq;};this.getStatus=function(){return al;};this.isDataStreamEnabled=function(){return aj.enableDataStreams;};this.prepareCommand=function(aq){return{session:this,requestType:aq};};this.requestFactory=X.HTTPRequestFactory();this.responseFactory=X.HTTPResponseFactory(ap);ak={on:this.on,removeListener:this.removeListener,isDataStreamEnabled:this.isDataStreamEnabled,getConfig:this.getConfig,getStatus:this.getStatus,getChannel:this.getChannel,getQueue:this.getQueue,getUsername:this.getUsername,getSessionID:this.getSessionID,getDataStreamID:this.getDataStreamID,getCurrentRealm:this.getCurrentRealm,getCurrentDriver:this.getCurrentDriver,start:this.start,stop:this.stop,destroy:this.destroy,subscribe:this.subscribe};return ak;}function P(ao,an,ah){var ap=this;var ag;var am=an;var al=false;var ak=0;var af="";var aj;var ai=-1;this.getClientResource=function(){return ag;};this.subscribe=function(){var aq={requestType:ab.RESOURCE_SUBSCRIBE,session:ah,resource:ap};s.queueCommand(aq);return ag;};this.unsubscribe=function(){var aq={requestType:ab.RESOURCE_UNSUBSCRIBE,session:ah,resource:ap};s.queueCommand(aq);return ag;};this.getAlias=function(){return aj;};this.setAlias=function(aq){aj=aq;};this.setSubscribed=function(aq){al=aq;if(al===false){ai=-1;}};this.isSubscribed=function(){return al;};this.publish=function(aq){var ar={requestType:ab.RESOURCE_PUBLISH,session:ah,resource:ap,event:aq};s.queueCommand(ar);return ag;};this.createTransaction=function(){var aq=g();var ar=ah.getSessionID()+X.generateTransactionID();return new N(ar,aq,ap);};this.getStartEID=function(){return ak;};this.setStartEID=function(aq){ak=aq;return ag;};this.getCurrentEID=function(){return ai;};this.setCurrentEID=function(aq){ai=aq;};this.getFilter=function(){return af;};this.setFilter=function(aq){af=aq;return ag;};this.getName=function(){return ao;};this.getResourceType=function(){return c.CHANNEL_RESOURCE;};this.on=function(ar,aq){am.on(ar,aq);return ag;};this.removeListener=function(ar,aq){am.removeListener(ar,aq);return ag;};this.notifyListeners=function(at,ar,aq){am.notifyListeners(at,ar,aq);};ah.pushResource(ap);ag={on:this.on,removeListener:this.removeListener,subscribe:this.subscribe,unsubscribe:this.unsubscribe,isSubscribed:this.isSubscribed,publish:this.publish,createTransaction:this.createTransaction,getStartEID:this.getStartEID,setStartEID:this.setStartEID,getFilter:this.getFilter,setFilter:this.setFilter,getName:this.getName,getResourceType:this.getResourceType};return ag;}function ac(ah,am,ai){var an=this;var ag;var al=am;var ak=false;var af="";var aj;this.getClientResource=function(){return ag;};this.subscribe=function(){var ao={requestType:ab.RESOURCE_SUBSCRIBE,session:ai,resource:an};s.queueCommand(ao);return ag;};this.unsubscribe=function(){var ao={requestType:ab.RESOURCE_UNSUBSCRIBE,session:ai,resource:an};s.queueCommand(ao);return ag;};this.getAlias=function(){return aj;};this.setAlias=function(ao){aj=ao;};this.setSubscribed=function(ao){ak=ao;};this.isSubscribed=function(){return ak;};this.publish=function(ao){var ap={requestType:ab.RESOURCE_PUBLISH,session:ai,resource:an,event:ao};s.queueCommand(ap);return ag;};this.createTransaction=function(){var ao=g();var ap=ai.getSessionID()+X.generateTransactionID();return new N(ap,ao,an);};this.getFilter=function(){return af;};this.setFilter=function(ao){af=ao;return ag;};this.getName=function(){return ah;};this.getResourceType=function(){return c.QUEUE_RESOURCE;};this.on=function(ap,ao){al.on(ap,ao);return ag;};this.removeListener=function(ap,ao){al.removeListener(ap,ao);return ag;};this.notifyListeners=function(aq,ap,ao){al.notifyListeners(aq,ap,ao);};ai.pushResource(an);ag={on:this.on,removeListener:this.removeListener,subscribe:this.subscribe,unsubscribe:this.unsubscribe,isSubscribed:this.isSubscribed,publish:this.publish,getFilter:this.getFilter,setFilter:this.setFilter,getName:this.getName,getResourceType:this.getResourceType,createTransaction:this.createTransaction};return ag;}function Q(ah,an,ai){var ao=this;var ag;var ak=false;var al=an;var af="";var am=5;var aj;this.getClientResource=function(){return ag;};this.subscribe=function(){var ap={requestType:ab.RESOURCE_SUBSCRIBE,session:ai,resource:ao};s.queueCommand(ap);return ag;};this.unsubscribe=function(){var ap={requestType:ab.RESOURCE_UNSUBSCRIBE,session:ai,resource:ao};s.queueCommand(ap);return ag;};this.getAlias=function(){return aj;};this.setAlias=function(ap){aj=ap;};this.setSubscribed=function(ap){ak=ap;};this.isSubscribed=function(){return ak;};this.publish=function(ap){var aq={requestType:ab.RESOURCE_PUBLISH,session:ai,resource:ao,event:ap};s.queueCommand(aq);return ag;};this.createTransaction=function(){var ap=g();var aq=ai.getSessionID()+X.generateTransactionID();return new N(aq,ap,ao);};this.commit=function(ap){var aq={requestType:ab.QUEUE_COMMIT,session:ai,resource:ao,event:ap};s.queueCommand(aq);return ag;};this.commitAll=function(){var ap={requestType:ab.QUEUE_COMMIT,session:ai,resource:ao,event:event};s.queueCommand(ap);return ag;};this.rollback=function(ap){var aq={requestType:ab.QUEUE_ROLLBACK,session:ai,resource:ao,event:ap};s.queueCommand(aq);return ag;};this.getFilter=function(){return af;};this.setFilter=function(ap){af=ap;return ag;};this.getWindowSize=function(){return am;};this.setWindowSize=function(ap){am=ap;return ag;};this.getName=function(){return ah;};this.getResourceType=function(){return c.TRANSACTIONAL_QUEUE_RESOURCE;};this.on=function(aq,ap){al.on(aq,ap);return ag;};this.removeListener=function(aq,ap){al.removeListener(aq,ap);return ag;};this.notifyListeners=function(ar,aq,ap){al.notifyListeners(ar,aq,ap);};ai.pushResource(ao);ag={on:this.on,removeListener:this.removeListener,subscribe:this.subscribe,unsubscribe:this.unsubscribe,isSubscribed:this.isSubscribed,publish:this.publish,commitAll:this.commitAll,commit:this.commit,rollback:this.rollback,getFilter:this.getFilter,setFilter:this.setFilter,getWindowSize:this.getWindowSize,setWindowSize:this.setWindowSize,getName:this.getName,getResourceType:this.getResourceType,createTransaction:this.createTransaction};return ag;}function W(al,ah,ak,ag,aj,ai,af,am){this.parentSession=al;this.dictionary=am;this.eventAttributes=aj;this._data=ai;this.tag=af;this.ttl=0;this.resource=ak;this.eventID=ah;this.resourceName=ag;}W.prototype.getSession=function f(){return this.parentSession;};W.prototype.getResource=function A(){return this.resource;};W.prototype.getResourceName=function B(){return this.resourceName;};W.prototype.getTTL=function l(){return this.ttl;};W.prototype.setTTL=function t(af){this.ttl=af;return this;};W.prototype.getEID=function L(af){return X.convertLongFromServer(af,this.eventID);};W.prototype.getData=function w(af){if(af==c.BYTE_ARRAY_AS_BASE64_STRING){return this._data;}else{if(af==c.BYTE_ARRAY_AS_INT_ARRAY){return X.base64Decode(this._data,true);}else{return X.base64Decode(this._data);}}};W.prototype.setData=function z(af,ag){if(ag==c.BYTE_ARRAY_AS_BASE64_STRING){this._data=af;}else{if(ag==c.BYTE_ARRAY_AS_INT_ARRAY){this._data=X.base64Encode(af,true);}else{this._data=X.base64Encode(af);}}return this;};W.prototype.getTag=function T(){return this.tag;};W.prototype.setTag=function Y(af){this.tag=af;return this;};W.prototype.getDictionary=function x(){if(!this.dictionary){this.dictionary=new k({});}return this.dictionary;};W.prototype.getEventAttributes=function n(){if(!this.eventAttributes){this.eventAttributes=new i({});}return this.eventAttributes;};W.prototype.hasData=function S(){return this._data!==undefined;};W.prototype.hasTag=function Z(){return this.tag!==undefined;};W.prototype.hasDictionary=function J(){return this.dictionary!==undefined;};k.STRING=0;k.LONG=1;k.DOUBLE=2;k.BOOLEAN=3;k.INTEGER=4;k.FLOAT=5;k.CHARACTER=6;k.BYTE=7;k.DICTIONARY=9;k.ARRAY=-1;k.createDictionary=function(){return new k({});};function k(af){this.innerProperties=af;}k.prototype.getKeys=function(){var ag=[];for(var af in this.innerProperties){if(this.innerProperties.hasOwnProperty(af)){ag.push(af);}}return ag;};k.prototype.get=function(ai,aj){if(this.innerProperties.hasOwnProperty(ai)){var ah=this.innerProperties[ai];if(ah[0]===c.EventDictionary.ARRAY){if(ah[1]===c.EventDictionary.LONG){var ak=ah[2].length;var af=ah[2];var al=[];for(var ag=0;ag<ak;ag++){al[ag]=X.convertLongFromServer(aj,af[ag]);}return al;}return ah[2];}else{if(ah[0]===c.EventDictionary.LONG){return X.convertLongFromServer(aj,ah[1]);}return ah[1];}}return null;};k.prototype.getType=function(af){return this.innerProperties[af][0];};k.prototype.getArrayType=function(af){return this.innerProperties[af][1];};k.prototype.put=function(af,ah,ag){this.innerProperties[af]=[ag,ah];return this;};k.prototype.putString=function(af,ag){this.innerProperties[af]=[k.STRING,ag];return this;};k.prototype.putLong=function(af,ag){this.innerProperties[af]=[k.LONG,ag];return this;};k.prototype.putDouble=function(af,ag){this.innerProperties[af]=[k.DOUBLE,ag];return this;};k.prototype.putBoolean=function(af,ag){this.innerProperties[af]=[k.BOOLEAN,ag];return this;};k.prototype.putInteger=function(af,ag){this.innerProperties[af]=[k.INTEGER,ag];return this;};k.prototype.putFloat=function(af,ag){this.innerProperties[af]=[k.FLOAT,ag];return this;};k.prototype.putChar=function(af,ag){this.innerProperties[af]=[k.CHARACTER,ag];return this;};k.prototype.putByte=function(af,ag){this.innerProperties[af]=[k.BYTE,ag];return this;};k.prototype.putDictionary=function(af,ag){this.innerProperties[af]=[k.DICTIONARY,ag];return this;};k.prototype.putArray=function(ag,ah,af){this.innerProperties[ag]=[k.ARRAY,af,ah];return this;};i.HEADER_KEYS=["_allowMerging","pubHost","pubName","subHost","subName","subID","messageType"];i.SERVER_HEADER_KEYS=["timeStamp","_isDelta","_isRedelivered","_isRegistered","deadEID","deadEventChannel","joinEID","joinChannel","joinRealm","joinPath"];i.JMS_HEADER_KEYS=["messageID","correlationID","type","expiration","destination","deliveryMode","priority","userID","appID","replyToName","replyToType"];function i(af){this.innerAttributes=af;}i.prototype.getSubscriberHost=function(){return this.innerAttributes.subHost;};i.prototype.getSubscriberName=function(){return this.innerAttributes.subName;};i.prototype.getSubscriberID=function(){return this.innerAttributes.subID;};i.prototype.getPublisherHost=function(){return this.innerAttributes.pubHost;};i.prototype.getPublisherName=function(){return this.innerAttributes.pubName;};i.prototype.setSubscriberHost=function(af){this.innerAttributes.subHost=af;return this;};i.prototype.setSubscriberName=function(af){this.innerAttributes.subName=af;return this;};i.prototype.setSubscriberNames=function(af){this.innerAttributes.subName=af;return this;};i.prototype.setPublisherName=function(af){this.innerAttributes.pubName=af;return this;};i.prototype.setPublisherHost=function(af){this.innerAttributes.pubHost=af;return this;};i.prototype.getAttribute=function(af){return this.innerAttributes[af];};i.prototype.getAttributeNames=function(){var af=[];for(var ag in this.innerAttributes){if(this.innerAttributes.hasOwnProperty(ag)){af.push(ag);}}return af;};i.prototype.setAttribute=function(af,ag){this.innerAttributes[af]=ag;return this;};i.prototype.getTimeStamp=function(af){return X.convertLongFromServer(af,this.innerAttributes.timeStamp);};i.prototype.getAllowMerge=function(){return this.innerAttributes._allowMerging;};i.prototype.isDelta=function(){return this.innerAttributes._isDelta;};i.prototype.isRedelivered=function(){return this.innerAttributes._isRedelivered;};i.prototype.isRegistered=function(){return this.innerAttributes._isRegistered;};i.prototype.getJoinChannel=function(){return this.innerAttributes.joinChannel;};i.prototype.getJoinEID=function(af){return X.convertLongFromServer(af,this.innerAttributes.joinEID);};i.prototype.getJoinPath=function(){return this.innerAttributes.joinPath;};i.prototype.getJoinRealm=function(){return this.innerAttributes.joinRealm;};i.prototype.getDeadEID=function(af){return X.convertLongFromServer(af,this.innerAttributes.deadEID);};i.prototype.getDeadEventStore=function(){return this.innerAttributes.deadEventChannel;};i.prototype.getApplicationID=function(){return this.innerAttributes.appID;};i.prototype.getCorrelationID=function(){return this.innerAttributes.correlationID;};i.prototype.getDeliveryMode=function(){return this.innerAttributes.deliveryMode;};i.prototype.getDestination=function(){return this.innerAttributes.destination;};i.prototype.getExpiration=function(af){return X.convertLongFromServer(af,this.innerAttributes.expiration);};i.prototype.getMessageID=function(){return this.innerAttributes.messageID;};i.prototype.getMessageType=function(){return this.innerAttributes.messageType;};i.prototype.getPriority=function(){return this.innerAttributes.priority;};i.prototype.getRedeliveredCount=function(){return this.innerAttributes.redeliveredCount;};i.prototype.getReplyToName=function(){return this.innerAttributes.replyToName;};i.prototype.getReplyType=function(){return this.innerAttributes.replyToType;};i.prototype.getType=function(){return this.innerAttributes.type;};i.prototype.getUserID=function(){return this.innerAttributes.userID;};i.prototype.setAllowMerge=function(af){this.innerAttributes._allowMerging=af;return this;};i.prototype.setApplicationID=function(af){this.innerAttributes.appID=af;return this;};i.prototype.setCorrelationID=function(af){this.innerAttributes.correlationID=af;return this;};i.prototype.setDeliveryMode=function(af){this.innerAttributes.deliveryMode=af;return this;};i.prototype.setDestination=function(af){this.innerAttributes.destination=af;return this;};i.prototype.setExpiration=function(af){this.innerAttributes.expiration=af;return this;};i.prototype.setMessageID=function(af){this.innerAttributes.messageID=af;return this;};i.prototype.setMessageType=function(af){this.innerAttributes.messageType=af;return this;};i.prototype.setPriority=function(af){this.innerAttributes.priority=af;return this;};i.prototype.setReplyToName=function(af){this.innerAttributes.replyToName=af;return this;};i.prototype.setReplyType=function(af){this.innerAttributes.replyToType=af;return this;};i.prototype.setType=function(af){this.innerAttributes.type=af;return this;};i.prototype.setUserID=function(af){this.innerAttributes.userID=af;return this;};i.prototype.setSubscriberID=function(af){this.innerAttributes.subID=af;return this;};function N(ai,am,af){var ao=this;var ah;var al=am;var aj=af;var ag;var ak=false;var an=false;this.getTxID=function(){return ai;};this.publishAndCommit=function(){if(an){throw new G(aj.getName(),ai);}var ap={requestType:ab.TX_PUBLISH,transaction:ao,resource:aj,event:ag};s.queueCommand(ap);return ah;};this.setIsCommitted=function(ap){ak=ap;};this.checkCommitStatus=function(ap){if(ak||!ap){al.notifyListeners(u.COMMIT,ah,true);}var aq={requestType:ab.TX_IS_COMMITTED,transaction:ao};s.queueCommand(aq);return ah;};this.setEvent=function(ap){if(an){throw new G(aj.getName(),ai);}ag=ap;return ah;};this.on=function(aq,ap){al.on(aq,ap);return ah;};this.removeListener=function(aq,ap){al.removeListener(aq,ap);return ah;};this.notifyListeners=function(ar,aq,ap){al.notifyListeners(ar,aq,ap);};ah={on:this.on,removeListener:this.removeListener,checkCommitStatus:this.checkCommitStatus,publishAndCommit:this.publishAndCommit,setEvent:this.setEvent};return ah;}function ad(af){return C(ab,af)+" ["+af+"]";}function C(ag,ah){for(var af in ag){if(ag.hasOwnProperty(af)&&ag[af]==ah){return af;}}}return{VERSION_NUMBER:"_VERSION_MAJOR_._VERSION_MINOR_",BUILD_NUMBER:"BuildNumberHere",BUILD_DATE:"12-Feb-1964",Observe:u,BYTE_ARRAY_AS_STRING:0,BYTE_ARRAY_AS_BASE64_STRING:1,BYTE_ARRAY_AS_INT_ARRAY:2,CHANNEL_RESOURCE:1,QUEUE_RESOURCE:2,TRANSACTIONAL_QUEUE_RESOURCE:3,Driver:r.Drivers.Names,clientSupportsDriver:ae.supportsDriver,initialize:r.initialize,createSession:aa,createEvent:U,createDictionary:p,on:O,removeListener:h,nirvana_core:E,nirvanaObj:r,Utils:{isLoggingEnabled:X.isLoggingEnabled,Logger:X.Logger,base64Encode:X.base64Encode,base64Decode:X.base64Decode},EventDictionary:{STRING:0,LONG:1,DOUBLE:2,BOOLEAN:3,INTEGER:4,FLOAT:5,CHARACTER:6,BYTE:7,DICTIONARY:9,ARRAY:-1},LongType:{LONG_AS_NUMBER:0,LONG_AS_ARRAY:1,LONG_AS_DECIMAL_STRING:2,LONG_AS_HEXADECIMAL_STRING:3}};})();c.on(c.Observe.ERROR,function(f,e){c.Utils.Logger.log(8,"System Error: "+e.message,f);});if(isBrowser){window.Nirvana=c;if(window.addEventListener){window.addEventListener("load",c.initialize,false);}else{if(window.attachEvent){window.attachEvent("onload",c.initialize);}}}if(!isBrowser){module.exports.Nirvana=c;module.exports.nirvana_core=c.nirvana_core;}function b(){c.nirvanaObj.implNirvanaCore(c.nirvana_core);if(typeof c===undefined||typeof c=="undefined"){}else{c.nirvana_core={};c.nirvanaObj={};delete c.nirvana_core;delete c.nirvanaObj;}}b();})();function implnirvanaObjTemp(a){nirvanaObjJS=a;}